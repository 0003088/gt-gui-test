This describes what to do for an release!

Set environment variable VERSION to current version to make those
scripts work:

 export VERSION=0.x.y


For the first few steps you have to work on branch master:
 git-checkout master

If any feature branch is left over merge it:
 git-merge --no-ff feature

Write NEWS for new release (do not forget to add links where to download release):
 editor doc/NEWS

And now commit everything:
 git-commit -a

Clean up the mess left over:
 git-clean -df

Finally increment version number in CMakeLists.txt:
 editor CMakeLists.txt
 git-commit -m "Ready for release $VERSION" CMakeLists.txt

Push changes to gitorious:
 git-pull && git-push



Now lets merge that to the release branch:
 git-checkout release
 git-merge --no-ff master

Create a new ChangeLog:
 git log --first-parent master > ChangeLog

Build tar.gz and tag version and make hashsum:
 git-commit --amend ChangeLog -m "Release $VERSION"
 make source-package

Unpack + compile + test those sources (using valgrind!):
 tar xvzf elektra-$VERSION.tar.gz && mkdir build && cd build && cmake ../elektra-$VERSION && make && ctest -T memcheck

Now push release branch with tags to gitorious:
 git-pull && git-push && git-push --tags



Now copy the packages to ftp (stay in same folder):
 cp ../elektra-$VERSION.tar.gz ~elektra-ftp/releases

Push elektra-ftp to gitorious:
 cd ~elektra-ftp && git-commit -a
 git-push && git-push gitorious


And the API docu (stay in same folder):
 mkdir ~elektra-doc/api/$VERSION/ && cp -ra doc/html doc/latex doc/man ~elektra-doc/api/$VERSION/


Symlink current to latest version and add everything:
 cd ~elektra-doc/api/ && rm current && ln -s $VERSION current && git-add current $VERSION


Push elektra-doc to gitorious:
 cd ~elektra-doc && git-commit -a
 git-push



Build deb:
 git-checkout debian
 dch --newversion $VERSION "New upstream version." 
 git-add debian/changelog
 git-commit -m $VERSION # this should be last commit!
 dpkg-buildpackage -rfakeroot -k00B86A15


Now install package + run some basic commands:
 kdb --version

Debian packages in chroot + publish in reprepro (todo)

Finally check links and send out mail to list
