#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

# Make sure libelektra is built before packages depending on it
binary/libelektra-bin binary/libelektra-dev:: binary/libelektra

# Which plugins should be built
ELEKTRA_PLUGINS="ALL"

CMAKE_FLAGS = \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DTARGET_PLUGIN_FOLDER=elektra4 \
	-DPLUGINS=$(ELEKTRA_PLUGINS) \
	-DKDB_DB_SYSTEM:PATH="/etc/kdb" \
	-DKDB_DB_HOME:PATH="/home" \
	-DKDB_DB_USER:PATH=".kdb" \
	-DINSTALL_DOCUMENTATION=ON \
	-DTARGET_DOCUMENTATION_HTML_FOLDER=share/doc/libelektra-doc/html \
	-DENABLE_TESTING=ON \
	-DINSTALL_TESTING=ON \
	-DENABLE_KDB_TESTING=OFF \
	-DBUILD_PDF=OFF \
	-DTARGET_TEST_DATA_FOLDER=share/libelektra-test/test-data

%:
	dh $@ --buildsystem=cmake --parallel

override_dh_auto_configure:
	dh_auto_configure -- $(CMAKE_FLAGS)
