

<HTML><HEAD><TITLE>Manpage of KDB</TITLE>
</HEAD><BODY>
<H1>KDB</H1>
Section:  (1)<BR>Updated: March 2004<BR><A HREF="#index">Index</A>
<A HREF="index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

kdb - Elektra key database command line administration tool
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>



<DL COMPACT>
<DT>
<B>kdb get</B> [<B>-dlr</B>] key/name




<DT>
<B>kdb set</B> [<B>-t</B>&nbsp;<B>type</B>] [<B>-c</B>&nbsp;<B>&quot;A&nbsp;comment&nbsp;about&nbsp;this&nbsp;key&quot;</B>] [<B>-m</B>&nbsp;<B>mode</B>] [<B>-u</B>&nbsp;<B>uid</B>] [<B>-g</B>&nbsp;<B>gid</B>] key/name &quot;the&nbsp;value&quot;




<DT>
<B>kdb set</B> [<B>-t</B>&nbsp;<B>type</B>] [<B>-m</B>&nbsp;<B>mode</B>] [<B>-c</B>&nbsp;<B>&quot;A&nbsp;comment&quot;</B>] key/name -- &quot;the&nbsp;value&quot;




<DT>
<B>kdb set</B> [<B>-t</B>&nbsp;<B>type</B>] [<B>-b</B>&nbsp;<B>file</B>] key/name




<DT>
<B>kdb ls</B> [<B>-lRfv</B>] [key/dir&nbsp;|&nbsp;key/name]




<DT>
<B>kdb ls</B> [<B>-lRfvx</B>] [key/dir&nbsp;|&nbsp;key/name] &gt; keys.xml




<DT>
<B>kdb edit</B> [<B>-R</B>] [key/dir&nbsp;|&nbsp;key/name]




<DT>
<B>kdb rm</B> key/name




<DT>
<B>kdb mv</B> key/src key/dest




<DT>
<B>kdb ln</B> key/src key/dest




<DT>
<B>kdb export</B> [<B>-f</B>] system/some/tree.root &gt; [file.xml]




<DT>
<B>kdb import</B> &lt; file.xml




<DT>
<B>kdb import</B> file.xml




<DT>
<B>kdb monitor</B> some/key/name


<DD>Description
</DL>
<P>

The <B>kdb</B> command provide ways to manipulate the Elektra keys database (see <B><A HREF="elektra.7.html">elektra</A></B>(7)) keys.
<P>
<P>

The subcommands implemented are very similar to regular UNIX commands like <B>ls</B>, and <B>rm</B>, specially in their output and options.
Subcommands
<DL COMPACT>
<DT><B>get</B><DD>
Get the value from the specified key. Accepts options: <B>-d</B>, <B>-l</B>, <B>-f</B>, <B>-s</B>
<P>
<DT><B>set</B><DD>
Set the value to the specified key. Accepts options: <B>-c</B>, <B>-t</B>, <B>-m</B>, <B>-b</B>
<P>
<DT><B>ls</B><DD>
As the <B><A HREF="ls.1.html">ls</A></B>(1) command, list key names for the specified key, or children keys, if specified a folder key. The <B>-v</B> argument will make it show also the values of each key. The <B>-d</B> (descriptive) will make it show the comment, key name and its value, as you are watching a plain text file. Accepts options: <B>-x</B>, <B>-d</B>, <B>-l</B>, <B>-f</B>, <B>-v</B>, <B>-R</B>
<P>
<DT><B>ln</B><DD>
Creates a key that is a symbolic links to another key.
<P>
<DT><B>mv</B><DD>
Move, or renames a key. Currently it can't move keys across different filesystems.
<P>
<DT><B>rm</B><DD>
As the <B><A HREF="rm.1.html">rm</A></B>(1) command, removes the key specified.
<P>
<DT><B>edit</B><DD>
A very powerfull subcommand that lets you edit an XML representation of the keys. The parameters it accepts is usually a parent key, so its child keys will be gathered. Can be used with the <B>-R</B> flag to work recursively. The editor used is the one set in the <B>$EDITOR</B> environment variable, or <B>vi</B>. After editing the keys, <B>kdb edit</B> will analyze them and commit only the changed keys, remove the keys removed, and add the keys added.
<P>
<DT><B>export</B>, <B>save</B>, <DD>
Export a subtree of keys to XML. If no subtree is defined right after the <B>export</B> command, <I>system</I> and current <I>user</I> trees will be exported. Output is written to standard output. The output encoding will allways be UTF-8, regardeless of your system encoding. UTF-8 is the most universal charset you can get when exchanging data between multiple systems. Accepts <B>-f</B>.
<P>
<DT><B>import</B>, <B>load</B>, <DD>
Import an XML representation of keys and save it to the keys database. If no filename is passed right after the <B>import</B> command, standard input is used.
<P>
<DT><B>monitor</B>, <B>mon</B>, <DD>
Monitor a key for some value change. It will block your command line until a change in the key value is detected, then return its new value.
Options
<DT><B>-R</B><DD>
Causes to work recursively. In <B>ls</B>, will list recursively.
<P>
<DT><B>-x</B><DD>
Makes <B>ls</B> output an XML representation of the keys, instead of an <B>ls</B>-compatible output.
<P>
<DT><B>-l</B><DD>
Causes to display long results. With <B>ls</B>, will generate lists similar to <B>ls -l</B>. With <B>get</B>, will show also the key name.
<P>
<DT><B>-a</B><DD>
Causes <B>ls</B> to display also inactive keys. Generate lists similar to <B>ls -a</B>. Inactive keys are keys which basename begins with a '.' (dot). An example of inactive key: <I>system/sw/XFree/current/Monitor/.Monitor1</I>
<P>
<DT><B>-f</B><DD>
Causes to work with full key names. A full key name makes sense only on <I>user/*</I> keys, and differentiate from the regular key names in specifying the owner user. If the current user is <I>someuser</I>, the <I>user/some/key</I> full name is <I>user:someuser/some/key</I>. Makes effect in <B>ls</B>, <B>export</B> and <B>get</B> subcommands.
<P>
<DT><B>-d</B><DD>
Causes <B>get</B> to work descriptivelly. When requesting a key it will show the comment, key name and its value in a fancy format
<P>
<DT><B>-s</B><DD>
Causes <B>get</B> to be more friendly to Shell scripts. For example, when requesting <I>user/env/env2/PATH</I>, the output will be PATH=&quot;the value&quot;, that is, only the basename of the key will be showed and the value will be surrounded by ' &quot; '.
<P>
<DT><B>-t type</B><DD>
When <B>set</B>ting a key's value, you can specify the type with this switch. Currently accepted types are <B>string</B> for plain text, <B>bin</B> for binary as-is values, <B>dir</B> to create folder keys and <B>link</B> to create symbolic links between keys. Plain text are always stored as <B><A HREF="UTF-8.7.html">UTF-8</A></B>(7) in Elektra, regardeless of your current encoding (<B>$LANG</B>). If you want to force a value to be stored without the <B><A HREF="UTF-8.7.html">UTF-8</A></B>(7) encoding (a bad idea), you can set it as binary. Binary values should be avoided, because they are black boxes for system administrators.
<P>
<DT><B>-b filename</B><DD>
Set the key value as the content of file <I>filename</I>. This option is more usefull when setting binary keys.
<P>
<DT><B>-m mode</B><DD>
For the <B>set</B> command. Will set the key access permission to <B>mode</B>, which must be an octal number as for <B><A HREF="chmod.1.html">chmod</A></B>(1).
<P>
<DT><B>-u uid</B><DD>
Create the key with <B>uid</B> user ID. It can be a user name or a uid number.
<P>
<DT><B>-g gid</B><DD>
Create the key with <B>gid</B> group ID. It can be a group name or a gid number
<P>
<DT><B>-c comment</B><DD>
When <B>set</B>ting keys, you can use this argument to set a descriptive comment for it. This comment is exactly as a comment in a plain text configuration file. The comment is stored as <B><A HREF="UTF-8.7.html">UTF-8</A></B>(7) regardeless of your current encoding (<B>$LANG</B>).
<P>
<DT><B>-v</B><DD>
With the <B>ls</B> subcommand, will make it show also the value stored in the key.
<P>
<DT><B>--</B><DD>
With the <B>set</B> subcommand, everything after it will be considered the value, even text with dashes (-).
Best Practices When Creating Keys
</DL>
<P>

When using Elektra to store your application's configuration and state, please keep in mind the following rules:
<P>
<DL COMPACT>
<DT>*<DD>
You are not allowed to create keys right under <I>system</I> or <I>user</I>.
<DT>*<DD>
You are not allowed to create folder keys right under <I>system</I> or <I>user</I>. They are reserved for very essential OS subsystems.
<DT>*<DD>
The keys for your application, called say <I>MyApp</I>, should be created under <I>system/sw/MyApp</I> and/or <I>user/sw/MyApp</I>.
<DT>*<DD>
It is suggested to make your application look for default keys under <I>system/sw/MyApp/current</I> and/or <I>user/sw/MyApp/current</I>. This way, from a sysadmin perspective, it will be possible to copy the <I>system/sw/MyApp/current</I> tree to something like <I>system/sw/MyApp/old</I>, and keep system clean and organized.
</DL>
<P>

<P>
<A NAME="lbAD">&nbsp;</A>
<H2>ENVIRONMENT</H2>

<P>
<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><BR>
<P>

<B>KDB_ROOT</B> if defined, prepends it to key names.
<P>
<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><BR>
<P>

<B>KDB_BACKEND</B> defines the name of another backend plugin library to use
<P>
<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>ExamplesSetting Keys<BR>
<P>

bash$<B>kdb set -c &quot;My first key&quot; user/example/key &quot;Some nice value&quot;</B>
<P>
<P>

bash$<B>kdb set user:luciana/example/key -- &quot;Some - nice - value with dashes&quot;</B>
<P>
<P>

bash#<B>KDB_ROOT=user:http/sw/httpd kdb set -u nobody -g http key &quot;Some value&quot;</B>
<P>
<P>

bash$<B>kdb set -b image.png -t bin user/example/binaryKey</B>
<P>
<P>

bash$<B>kdb set -b file.txt user/example/regularKey</B>
<P>
<P>

bash#<B>kdb set -t link system/sw/XFree/current system/sw/XFree/handmade</B>
Getting Keys
<P>

bash$<B>KDB_ROOT=user/example kdb get key</B>
<P>
<P>

bash$<B>KDB_BACKEND=gconf kdb get user/sw/gnome-terminal/global/active_encodings</B>
Listing
<P>

bash$<B>kdb ls -laR user:valeria</B>
<P>
<P>

bash$<B>kdb ls -lR system/sw/xorg/current</B>
<P>
<P>

bash$<B>KDB_ROOT=system/sw kdb ls -lR xorg</B>
<P>
<P>

bash$<B>KDB_BACKEND=fstab kdb ls -Rv system/filesystems</B>
Miscelaneous
<P>

bash#<B>kdb ln system/sw/xorg/handmade system/sw/xorg/current</B>
<P>
<P>

bash#<B>kdb mv system/sw/xorg/current system/sw/xorg/old</B>
<P>
<P>

bash#<B>kdb rm system/inittab/rc4</B>
<P>
<P>

bash$<B>KDB_BACKEND=gconf kdb rm user/gconfKey</B>
XML Import and Export
<P>

bash#<B>kdb export user/sw/app | sed -e 's|/app/|/app2/|g' | kdb import</B>
<P>
<P>

bash#<B>KDB_ROOT=system/sw kdb export myapp &gt; myappconf.xml</B>
<P>
<P>

bash#<B>kdb import myappconf.xml</B>
<P>
<P>

bash$<B>KDB_BACKEND=gconf kdb export user/sw</B>
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>SEE ALSO</H2>

<P>
<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><BR>
<P>

<B><A HREF="elektra.7.html">elektra</A></B>(7),<B><A HREF="elektra.5.html">elektra</A></B>(5) 
<P>
<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><BR>
<A NAME="lbAF">&nbsp;</A>
<H2>AUTHOR</H2>

Avi Alkalay.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">ENVIRONMENT</A><DD>
<DT><A HREF="#lbAE">SEE ALSO</A><DD>
<DT><A HREF="#lbAF">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 13:54:02 GMT, July 25, 2005
</BODY>
</HTML>
