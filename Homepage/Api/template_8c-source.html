<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Elektra Project: template.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">backends</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">template</a></div>
<h1>template.c</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment">            temaple.c  -  Skeleton of backends to access the Key Database</span>
00003 <span class="comment">                             -------------------</span>
00004 <span class="comment">    begin                : Mon Dec 26 2004</span>
00005 <span class="comment">    copyright            : (C) 2004 by Avi Alkalay</span>
00006 <span class="comment">    email                : avi@unix.sh</span>
00007 <span class="comment"> ***************************************************************************/</span>
00008 
00009 <span class="comment">/***************************************************************************</span>
00010 <span class="comment"> *                                                                         *</span>
00011 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
00012 <span class="comment"> *   it under the terms of the BSD License (revised).                      *</span>
00013 <span class="comment"> *                                                                         *</span>
00014 <span class="comment"> ***************************************************************************/</span>
00015 
00016 
00017 
00018 <span class="comment">/***************************************************************************</span>
00019 <span class="comment"> *                                                                         *</span>
00020 <span class="comment"> *   This is the skeleton of the methods you'll have to implement in order *</span>
00021 <span class="comment"> *   to provide libkdb.so a valid backend.                                 *</span>
00022 <span class="comment"> *   Simple fill the empty _backend functions with your code and you are   *</span>
00023 <span class="comment"> *   ready to go.                                                          *</span>
00024 <span class="comment"> *                                                                         *</span>
00025 <span class="comment"> ***************************************************************************/</span>
00026 
00027 
00028 <span class="comment">/* Subversion stuff</span>
00029 <span class="comment"></span>
00030 <span class="comment">$Id: template.c 232 2005-05-25 11:22:25Z aviram $</span>
00031 <span class="comment">$LastChangedBy: aviram $</span>
00032 <span class="comment"></span>
00033 <span class="comment">*/</span>
00034 
00035 
00036 
00037 <span class="preprocessor">#include &lt;kdb.h&gt;</span>
00038 <span class="preprocessor">#include &lt;kdbbackend.h&gt;</span>
00039 
00040 
00041 <span class="preprocessor">#define BACKENDNAME "my_backend"</span>
00042 <span class="preprocessor"></span>
00043 
00044 
00046 <span class="preprocessor">#ifdef PATH_MAX</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define MAX_PATH_LENGTH PATH_MAX</span>
00048 <span class="preprocessor"></span>
00049 <span class="preprocessor">#elif __USE_POSIX</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define MAX_PATH_LENGTH _POSIX_PATH_MAX</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#else </span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define MAX_PATH_LENGTH 4096</span>
00053 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00054 <span class="preprocessor"></span>
00055 
00056 
00057 
<a name="l00133"></a><a class="code" href="group__backend.html#ga9">00133</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga9">kdbOpen_backend</a>() {
00134     <span class="comment">/* backend initialization logic */</span>
00135     <span class="keywordflow">return</span> 0;
00136 }
00137 
00138 
00139 
00140 
<a name="l00154"></a><a class="code" href="group__backend.html#ga10">00154</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga10">kdbClose_backend</a>() {
00155     <span class="comment">/* free all backend resources and shut it down */</span>
00156     <span class="keywordflow">return</span> 0; <span class="comment">/* success */</span>
00157 }
00158 
00159 
00160 
<a name="l00171"></a><a class="code" href="group__backend.html#ga11">00171</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga11">kdbStatKey_backend</a>(<a class="code" href="struct__Key.html">Key</a> *key) {
00172     <span class="comment">/* get the most possible key metainfo */</span>
00173     <span class="keywordflow">return</span> 0; <span class="comment">/* success */</span>
00174 }
00175 
00176 
<a name="l00187"></a><a class="code" href="group__backend.html#ga12">00187</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga12">kdbGetKey_backend</a>(<a class="code" href="struct__Key.html">Key</a> *key) {
00188     <span class="comment">/* fully gets a key */</span>
00189     <span class="keywordflow">return</span> 0; <span class="comment">/* success */</span>
00190 }
00191 
00192 
00193 
<a name="l00206"></a><a class="code" href="group__backend.html#ga13">00206</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga13">kdbSetKey_backend</a>(<a class="code" href="struct__Key.html">Key</a> *key) {
00207     <span class="comment">/* fully sets a key */</span>
00208     <span class="keywordflow">return</span> 0; <span class="comment">/* success */</span>
00209 }
00210 
00211 
00212 
<a name="l00219"></a><a class="code" href="group__backend.html#ga14">00219</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga14">kdbRename_backend</a>(<a class="code" href="struct__Key.html">Key</a> *key, <span class="keyword">const</span> <span class="keywordtype">char</span> *newName) {
00220     <span class="comment">/* rename a key to another name */</span>
00221     <span class="keywordflow">return</span> 0; <span class="comment">/* success */</span>
00222 }
00223 
00224 
00225 
00226 
<a name="l00233"></a><a class="code" href="group__backend.html#ga15">00233</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga15">kdbRemoveKey_backend</a>(<span class="keyword">const</span> <a class="code" href="struct__Key.html">Key</a> *key) {
00234     <span class="comment">/* remove a key from the database */</span>
00235     <span class="keywordflow">return</span> 0;  <span class="comment">/* success */</span>
00236 }
00237 
00238 
00239 
00240 
<a name="l00247"></a><a class="code" href="group__backend.html#ga16">00247</a> ssize_t <a class="code" href="group__backend.html#ga16">kdbGetKeyChildKeys_backend</a>(<span class="keyword">const</span> <a class="code" href="struct__Key.html">Key</a> *parentKey, <a class="code" href="struct__KeySet.html">KeySet</a> *returned, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> options) {
00248     <span class="comment">/* retrieve multiple hierarchical keys */</span>
00249     <span class="keywordflow">return</span> returned-&gt;<a class="code" href="struct__KeySet.html#o3">size</a>; <span class="comment">/* success */</span>
00250 }
00251 
00252 
<a name="l00263"></a><a class="code" href="group__backend.html#ga17">00263</a> <span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga17">kdbSetKeys_backend</a>(<a class="code" href="struct__KeySet.html">KeySet</a> *ks) {
00264     <span class="comment">/* set many keys */</span>
00265     <span class="keywordflow">return</span> 0;
00266 }
00267 
00268 
<a name="l00277"></a><a class="code" href="group__backend.html#ga18">00277</a> u_int32_t <a class="code" href="group__backend.html#ga18">kdbMonitorKeys_backend</a>(<a class="code" href="struct__KeySet.html">KeySet</a> *interests, u_int32_t diffMask,
00278         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> iterations, <span class="keywordtype">unsigned</span> sleep) {
00279     <span class="keywordflow">return</span> 0;
00280 }
00281 
00282 
00283 
<a name="l00293"></a><a class="code" href="group__backend.html#ga19">00293</a> u_int32_t <a class="code" href="group__backend.html#ga19">kdbMonitorKey_backend</a>(<a class="code" href="struct__Key.html">Key</a> *interest, u_int32_t diffMask,
00294         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> iterations, <span class="keywordtype">unsigned</span> sleep) {
00295     <span class="keywordflow">return</span> 0;
00296 }
00297 
00298 
<a name="l00314"></a><a class="code" href="group__backend.html#ga20">00314</a> KDBBackend *<a class="code" href="group__backend.html#ga20">kdbBackendFactory</a>(<span class="keywordtype">void</span>) {
00315     <span class="keywordflow">return</span> <a class="code" href="group__backend.html#ga7">kdbBackendExport</a>(BACKENDNAME,
00316         <a class="code" href="group__backend.html#gga21a2">KDB_BE_OPEN</a>,           &amp;<a class="code" href="group__backend.html#ga9">kdbOpen_backend</a>,
00317         <a class="code" href="group__backend.html#gga21a3">KDB_BE_CLOSE</a>,          &amp;<a class="code" href="group__backend.html#ga10">kdbClose_backend</a>,
00318         <a class="code" href="group__backend.html#gga21a5">KDB_BE_GETKEY</a>,         &amp;<a class="code" href="group__backend.html#ga12">kdbGetKey_backend</a>,
00319         <a class="code" href="group__backend.html#gga21a6">KDB_BE_SETKEY</a>,         &amp;<a class="code" href="group__backend.html#ga13">kdbSetKey_backend</a>,
00320         <a class="code" href="group__backend.html#gga21a4">KDB_BE_STATKEY</a>,        &amp;<a class="code" href="group__backend.html#ga11">kdbStatKey_backend</a>,
00321         <a class="code" href="group__backend.html#gga21a8">KDB_BE_RENAME</a>,         &amp;<a class="code" href="group__backend.html#ga14">kdbRename_backend</a>,
00322         <a class="code" href="group__backend.html#gga21a9">KDB_BE_REMOVEKEY</a>,      &amp;<a class="code" href="group__backend.html#ga15">kdbRemoveKey_backend</a>,
00323         <a class="code" href="group__backend.html#gga21a10">KDB_BE_GETCHILD</a>,       &amp;<a class="code" href="group__backend.html#ga16">kdbGetKeyChildKeys_backend</a>,
00324         <a class="code" href="group__backend.html#gga21a11">KDB_BE_MONITORKEY</a>,     &amp;<a class="code" href="group__backend.html#ga19">kdbMonitorKey_backend</a>,
00325         <a class="code" href="group__backend.html#gga21a12">KDB_BE_MONITORKEYS</a>,    &amp;<a class="code" href="group__backend.html#ga18">kdbMonitorKeys_backend</a>,
00326         <span class="comment">/* set to default implementation: */</span>
00327         <a class="code" href="group__backend.html#gga21a7">KDB_BE_SETKEYS</a>,        &amp;<a class="code" href="group__backend.html#ga4">kdbSetKeys_default</a>,
00328         <a class="code" href="group__backend.html#gga21a13">KDB_BE_END</a>);
00329 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jul 30 09:10:59 2005 for Elektra Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
