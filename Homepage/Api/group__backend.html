<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Elektra Project: Elektra framework for pluggable backends</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>Elektra framework for pluggable backends</h1>The tactics to create pluggable backends to libkdb.so.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__Key.html">_Key</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The private Key struct.  <a href="struct__Key.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__KeySet.html">_KeySet</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The private KeySet struct.  <a href="struct__KeySet.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga21">KDBBackendMethod</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a2">KDB_BE_OPEN</a> = 1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a3">KDB_BE_CLOSE</a> = 1&lt;&lt;1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a4">KDB_BE_STATKEY</a> = 1&lt;&lt;2, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a5">KDB_BE_GETKEY</a> = 1&lt;&lt;3, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a6">KDB_BE_SETKEY</a> = 1&lt;&lt;4, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a7">KDB_BE_SETKEYS</a> = 1&lt;&lt;5, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a8">KDB_BE_RENAME</a> = 1&lt;&lt;6, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a9">KDB_BE_REMOVEKEY</a> = 1&lt;&lt;7, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a10">KDB_BE_GETCHILD</a> = 1&lt;&lt;8, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a11">KDB_BE_MONITORKEY</a> = 1&lt;&lt;9, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a12">KDB_BE_MONITORKEYS</a> = 1&lt;&lt;10, 
<br>
&nbsp;&nbsp;<a class="el" href="group__backend.html#gga21a13">KDB_BE_END</a> = 0
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Switches to denote the backend methods.  <a href="#ga21">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga0">unencode</a> (char *encoded, void *returned)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unencodes a buffer of hexadecimal values.  <a href="#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga1">kdbNeedsUTF8Conversion</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if UTF-8 conversion is needed in current context.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga2">UTF8Engine</a> (int direction, char **string, size_t *inputOutputByteSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts string to (<code>direction</code> = <code>UTF8_TO</code>) and from (<code>direction</code> = <code>UTF8_FROM</code>) UTF-8.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga3">encode</a> (void *unencoded, size_t size, char *returned)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Encodes a buffer of data onto hexadecimal ASCII.  <a href="#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga4">kdbSetKeys_default</a> (<a class="el" href="struct__KeySet.html">KeySet</a> *ks)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A high level, probably inefficient implementation for the <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> method.  <a href="#ga4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga5">kdbMonitorKeys_default</a> (<a class="el" href="struct__KeySet.html">KeySet</a> *interests, u_int32_t diffMask, unsigned long iterations, unsigned sleep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A high level, probably inefficient, implementation for the <a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a> method.  <a href="#ga5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga6">kdbMonitorKey_default</a> (<a class="el" href="struct__Key.html">Key</a> *interest, u_int32_t diffMask, unsigned long iterations, unsigned sleep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A high level, probably inefficient, implementation for the <a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a> method.  <a href="#ga6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">KDBBackend *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga7">kdbBackendExport</a> (const char *backendName,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function must be called by a backend's <a class="el" href="group__backend.html#ga20">kdbBackendFactory()</a> to define the backend's methods that will be exported.  <a href="#ga7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga8">strblen</a> (const char *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates the lenght in bytes of a string.  <a href="#ga8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga9">kdbOpen_backend</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the backend.  <a href="#ga9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga10">kdbClose_backend</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">All finalization logic of the backend should go here.  <a href="#ga10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga11">kdbStatKey_backend</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation for <a class="el" href="group__kdb.html#ga13">kdbStatKey()</a> method.  <a href="#ga11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga12">kdbGetKey_backend</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation for <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> method.  <a href="#ga12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga13">kdbSetKey_backend</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation for <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> method.  <a href="#ga13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga14">kdbRename_backend</a> (<a class="el" href="struct__Key.html">Key</a> *key, const char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation for <a class="el" href="group__kdb.html#ga17">kdbRename()</a> method.  <a href="#ga14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga15">kdbRemoveKey_backend</a> (const <a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation for <a class="el" href="group__kdb.html#ga18">kdbRemoveKey()</a> method.  <a href="#ga15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga16">kdbGetKeyChildKeys_backend</a> (const <a class="el" href="struct__Key.html">Key</a> *parentKey, <a class="el" href="struct__KeySet.html">KeySet</a> *returned, unsigned long options)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation for <a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a> method.  <a href="#ga16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga17">kdbSetKeys_backend</a> (<a class="el" href="struct__KeySet.html">KeySet</a> *ks)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation for <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> method.  <a href="#ga17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga18">kdbMonitorKeys_backend</a> (<a class="el" href="struct__KeySet.html">KeySet</a> *interests, u_int32_t diffMask, unsigned long iterations, unsigned sleep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The implementation of this method is optional.  <a href="#ga18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga19">kdbMonitorKey_backend</a> (<a class="el" href="struct__Key.html">Key</a> *interest, u_int32_t diffMask, unsigned long iterations, unsigned sleep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The implementation of this method is optional.  <a href="#ga19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">KDBBackend *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backend.html#ga20">kdbBackendFactory</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">All KeyDB methods implemented by the backend can have random names, except <a class="el" href="group__backend.html#ga20">kdbBackendFactory()</a>.  <a href="#ga20"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The tactics to create pluggable backends to libkdb.so. 
<p>
Since version 0.4.9, Elektra can dynamically load different key storage backends. Fast jump to <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a> to see an example of a backend implementation.<p>
The methods of class KeyDB that are backend dependent are <a class="el" href="group__kdb.html#ga0">kdbOpen()</a>, <a class="el" href="group__kdb.html#ga3">kdbClose()</a>, <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>, <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a>, <a class="el" href="group__kdb.html#ga13">kdbStatKey()</a>, <a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a>, <a class="el" href="group__kdb.html#ga19">kdbRemove()</a>, <a class="el" href="group__kdb.html#ga17">kdbRename()</a>. So a backend must reimplement these methods.<p>
And methods that have a builtin default high-level inefficient implementation are <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a>, <a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a>, <a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a>. So it is suggested to reimplement them too, to make them more efficient.<p>
The other KeyDB methods are higher level. They use the above methods to do their job, and generally don't have to be reimplemented for a different backend.<p>
The backend must implement a method with name <a class="el" href="group__backend.html#ga20">kdbBackendFactory()</a> and no parameters, that is responsible of exporting the implementations of libkdb.so backend dependent methods.<p>
The backend implementation must: <div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;kdb.h&gt;</span>
<span class="preprocessor">#include &lt;kdbbackend.h&gt;</span>
</pre></div><p>
<b>Better than that, a skeleton of a backend implementation is provided inside Elektra development package or source code tree, and should be used as a base for the implementation.</b><p>
An elektrified program will use the backend defined by environment variable <em>$KDB_BACKEND</em>, The backend library is dynamically loaded when the program calls <a class="el" href="group__kdb.html#ga0">kdbOpen()</a>, unless if the program is security/authentication/setuid related, in which it probably uses the more secure <a class="el" href="group__kdb.html#ga1">kdbOpenDefault()</a> which completely ignores the <em>$KDB_BACKEND</em> environment and will use the <code>"default"</code> named backend defined by the sysadmin. Look at <code>/lib/libkdb-default</code>.so link to see the default backend for your system.<p>
Elektra source code or development package provides a skeleton and Makefile to implement a backend, and we'll document this skeleton here.<p>
A backend is defined by a single name, for example <code>BACKENDNAME</code>, that causes libkdb.so look for its library as <code>libkdb-BACKENDNAME</code>.so.<p>
Elektra source code tree includes several backend implementations (<a href="http://germane-software.com/repositories/elektra/trunk/src/backends">http://germane-software.com/repositories/elektra/trunk/src/backends</a>) that can also be used as a reference. <hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="ga21" doxytag="kdbbackend.h::KDBBackendMethod"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="group__backend.html#ga21">KDBBackendMethod</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Switches to denote the backend methods. 
<p>
Used in calls to <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a>. <dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gga21a2" doxytag="KDB_BE_OPEN"></a>KDB_BE_OPEN</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga0">kdbOpen()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a3" doxytag="KDB_BE_CLOSE"></a>KDB_BE_CLOSE</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga3">kdbClose()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a4" doxytag="KDB_BE_STATKEY"></a>KDB_BE_STATKEY</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga13">kdbStatKey()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a5" doxytag="KDB_BE_GETKEY"></a>KDB_BE_GETKEY</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a6" doxytag="KDB_BE_SETKEY"></a>KDB_BE_SETKEY</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a7" doxytag="KDB_BE_SETKEYS"></a>KDB_BE_SETKEYS</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a8" doxytag="KDB_BE_RENAME"></a>KDB_BE_RENAME</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga17">kdbRename()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a9" doxytag="KDB_BE_REMOVEKEY"></a>KDB_BE_REMOVEKEY</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga18">kdbRemoveKey()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a10" doxytag="KDB_BE_GETCHILD"></a>KDB_BE_GETCHILD</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a11" doxytag="KDB_BE_MONITORKEY"></a>KDB_BE_MONITORKEY</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a12" doxytag="KDB_BE_MONITORKEYS"></a>KDB_BE_MONITORKEYS</em>&nbsp;</td><td>
Next arg is backend for <a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a> </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga21a13" doxytag="KDB_BE_END"></a>KDB_BE_END</em>&nbsp;</td><td>
End of arguments </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kdbbackend_8h-source.html#l00040">40</a> of file <a class="el" href="kdbbackend_8h-source.html">kdbbackend.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="libkdb.c::unencode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t unencode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>encoded</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unencodes a buffer of hexadecimal values. 
<p>
This is a helper function.<p>
The allowed format for the hexadecimal values is just a stream of pairs of plain hex-digits, all together or space-separated. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>encoded</em>&nbsp;</td><td>the source of ASCII hexadecimal digits. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returned</em>&nbsp;</td><td>the destination for the unencoded data. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the amount of bytes unencoded, or a negative value and <code>errno</code> is set to KDB_RET_TYPEMISMATCH </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00318">318</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="libkdb.c::kdbNeedsUTF8Conversion"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbNeedsUTF8Conversion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks if UTF-8 conversion is needed in current context. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>0 if not needed, anything else if needed </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00359">359</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="libkdb_8c-source.html#l00384">UTF8Engine()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="libkdb.c::UTF8Engine"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UTF8Engine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>direction</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>inputOutputByteSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Converts string to (<code>direction</code> = <code>UTF8_TO</code>) and from (<code>direction</code> = <code>UTF8_FROM</code>) UTF-8. 
<p>
Since Elektra provides portability for key names and string values between different codesets, you should use this helper in your backend to convert to and from universal UTF-8 strings, when storing key names, values and comments.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>direction</em>&nbsp;</td><td>must be <code>UTF8_TO</code> (convert from current non-UTF-8 to UTF-8) or <code>UTF8_FROM</code> (convert from UTF-8 to current non-UTF-8) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>before the call: the string to be converted; after the call: reallocated to carry the converted string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>inputOutputByteSize</em>&nbsp;</td><td>before the call: the size of the string including leading NULL; after the call: the size of the converted string including leading NULL </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise and <code>errno</code> is propagated </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00384">384</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00359">kdbNeedsUTF8Conversion()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="libkdb.c::encode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t encode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>unencoded</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Encodes a buffer of data onto hexadecimal ASCII. 
<p>
This is a helper function.<p>
The resulting data is made up of pairs of ASCII hex-digits, space- and newline-separated. This is the counterpart of <a class="el" href="group__backend.html#ga0">unencode()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>unencoded</em>&nbsp;</td><td>the source buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the size of the source buffer in bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returned</em>&nbsp;</td><td>the destination for the ASCII-encoded data. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the amount of bytes used in the resulting encoded buffer. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__backend.html#ga0">unencode()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00448">448</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="key_8c-source.html#l02563">keyToStream()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="libkdb.c::kdbSetKeys_default"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbSetKeys_default           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ks</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A high level, probably inefficient implementation for the <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> method. 
<p>
If a backend doesn't want to reimplement this method, this implementation can be used, in which <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> will be called for each Key object contained in <code>ks</code>.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a>, <a class="el" href="group__backend.html#ga17">kdbSetKeys_backend()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00884">884</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00910">kdbSetKey()</a>, <a class="el" href="key_8c-source.html#l01719">keyNeedsSync()</a>, <a class="el" href="key_8c-source.html#l03006">ksCurrent()</a>, and <a class="el" href="key_8c-source.html#l02990">ksNext()</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="libkdb.c::kdbMonitorKeys_default"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int32_t kdbMonitorKeys_default           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>interests</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_int32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>diffMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>iterations</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>sleep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A high level, probably inefficient, implementation for the <a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a> method. 
<p>
If a backend doesn't want to reimplement this method, this implementation can be used. 
<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l01114">1114</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l01184">kdbMonitorKey()</a>, <a class="el" href="key_8c-source.html#l03006">ksCurrent()</a>, <a class="el" href="key_8c-source.html#l02990">ksNext()</a>, and <a class="el" href="kdbprivate_8h-source.html#l00178">_KeySet::size</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="libkdb.c::kdbMonitorKey_default"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int32_t kdbMonitorKey_default           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>interest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_int32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>diffMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>iterations</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>sleep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A high level, probably inefficient, implementation for the <a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a> method. 
<p>
If a backend doesn't want to reimplement this method, this implementation can be used. 
<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l01209">1209</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="group__kdb.html#gga23a56">KDB_RET_NOCRED</a>, <a class="el" href="group__kdb.html#gga23a48">KDB_RET_NOTFOUND</a>, <a class="el" href="libkdb_8c-source.html#l00825">kdbGetKey()</a>, <a class="el" href="key_8c-source.html#l02479">keyCompare()</a>, <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, <a class="el" href="key_8c-source.html#l02211">keyDup()</a>, <a class="el" href="key_8c-source.html#l00724">keyGetNameSize()</a>, and <a class="el" href="key_8c-source.html#l00321">keyNew()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="libkdb.c::kdbBackendExport"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">KDBBackend* kdbBackendExport           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>backendName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function must be called by a backend's <a class="el" href="group__backend.html#ga20">kdbBackendFactory()</a> to define the backend's methods that will be exported. 
<p>
Its job is to organize a libelektra.so's table of virtual methods with pointers to backend dependent methods.<p>
The order and number of arguments are flexible (as <a class="el" href="group__key.html#ga0">keyNew()</a>) to let libelektra.so evolve without breaking its ABI compatibility with backends. So for each method a backend must export, there is a flag defined by <a class="el" href="group__backend.html#ga21">KDBBackendMethod</a>. Each flag tells <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a> which method comes next. A backend can have no implementation for a few methods that have default inefficient high-level implementations -- <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a>, <a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a>, <a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a> -- and to use these defaults, simply don't pass anything to <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a> about them.<p>
The last parameter must be <code>KDB_BE_END</code> .<p>
<dl compact><dt><b>Example of a complete backend:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="comment">//</span>
<span class="comment">// This is my implementation for an Elektra backend storage.</span>
<span class="comment">//</span>
<span class="comment">// To compile it:</span>
<span class="comment">// $ cc -fpic -o myback.o -c myback.c</span>
<span class="comment">// $ cc -shared -fpic -o libelektra-myback.so myback.o</span>
<span class="comment">// </span>
<span class="comment">// To use it:</span>
<span class="comment">// $ export KDB_BACKEND=myback</span>
<span class="comment">// $ kdb ls -Rv</span>
<span class="comment">//</span>

<span class="preprocessor">#include &lt;kdb.h&gt;</span>
<span class="preprocessor">#include &lt;kdbbackend.h&gt;</span>

<span class="preprocessor">#define BACKENDNAME "my_elektra_backend_implementation"</span>
<span class="preprocessor"></span>

<span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga9">kdbOpen_backend</a>() {...}
<span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga10">kdbClose_backend</a>() {...}
<span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga12">kdbGetKey_backend</a>(Key *key) {...}
<span class="keywordtype">int</span> <a class="code" href="group__backend.html#ga13">kdbSetKey_backend</a>(Key *key) {...}

... etc implementations of other methods ...



KDBBackend *<a class="code" href="group__backend.html#ga20">kdbBackendFactory</a>(<span class="keywordtype">void</span>) {
    <span class="keywordflow">return</span> <a class="code" href="group__backend.html#ga7">kdbBackendExport</a>(BACKENDNAME,
        KDB_BE_OPEN,          &amp;kdbOpen_backend,
        KDB_BE_CLOSE,         &amp;kdbClose_backend,
        KDB_BE_GETKEY,        &amp;kdbGetKey_backend,
        KDB_BE_SETKEY,        &amp;kdbSetKey_backend,
        KDB_BE_STATKEY,       &amp;kdbStatKey_backend,
        KDB_BE_RENAME,        &amp;kdbRename_backend,
        KDB_BE_REMOVEKEY,     &amp;kdbRemoveKey_backend,
        KDB_BE_GETCHILD,      &amp;kdbGetKeyChildKeys_backend,
        KDB_BE_SETKEYS,       &amp;kdbSetKeys_backend,
        KDB_BE_MONITORKEY,    &amp;kdbMonitorKey_backend,
        KDB_BE_MONITORKEYS,   &amp;kdbMonitorKeys_backend,
        KDB_BE_END);
}
</pre></div></dd></dl>
In the example, the *_backend() methods can have other random names, since you'll correctly pass them later to <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>backendName</em>&nbsp;</td><td>a simple name for this backend </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>an object that contains all backend informations needed by libelektra.so </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l01336">1336</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="group__backend.html#gga21a3">KDB_BE_CLOSE</a>, <a class="el" href="group__backend.html#gga21a10">KDB_BE_GETCHILD</a>, <a class="el" href="group__backend.html#gga21a5">KDB_BE_GETKEY</a>, <a class="el" href="group__backend.html#gga21a11">KDB_BE_MONITORKEY</a>, <a class="el" href="group__backend.html#gga21a12">KDB_BE_MONITORKEYS</a>, <a class="el" href="group__backend.html#gga21a2">KDB_BE_OPEN</a>, <a class="el" href="group__backend.html#gga21a9">KDB_BE_REMOVEKEY</a>, <a class="el" href="group__backend.html#gga21a8">KDB_BE_RENAME</a>, <a class="el" href="group__backend.html#gga21a6">KDB_BE_SETKEY</a>, <a class="el" href="group__backend.html#gga21a7">KDB_BE_SETKEYS</a>, <a class="el" href="group__backend.html#gga21a4">KDB_BE_STATKEY</a>, and <a class="el" href="key_8c-source.html#l00049">strblen()</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="key.c::strblen"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">size_t strblen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Calculates the lenght in bytes of a string. 
<p>
This function differs from strlen() because it is Unicode and multibyte chars safe. While strlen() counts characters and ignores the final NULL, <a class="el" href="group__backend.html#ga8">strblen()</a> count bytes including the ending NULL. <dl compact><dt><b>Returns:</b></dt><dd>number of bytes used by the string, including the final NULL. </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l00049">49</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="libkdb_8c-source.html#l01336">kdbBackendExport()</a>, <a class="el" href="libkdb_8c-source.html#l00605">kdbGetKeyByParent()</a>, <a class="el" href="libkdb_8c-source.html#l00622">kdbGetKeyByParentKey()</a>, <a class="el" href="libkdb_8c-source.html#l00563">kdbGetValueByParent()</a>, <a class="el" href="libkdb_8c-source.html#l00582">kdbSetValueByParent()</a>, <a class="el" href="key_8c-source.html#l00629">keyAddBaseName()</a>, <a class="el" href="key_8c-source.html#l01305">keyGetBaseName()</a>, <a class="el" href="key_8c-source.html#l02130">keyGetComment()</a>, <a class="el" href="key_8c-source.html#l02103">keyGetCommentSize()</a>, <a class="el" href="key_8c-source.html#l00828">keyGetFullName()</a>, <a class="el" href="key_8c-source.html#l00798">keyGetFullNameSize()</a>, <a class="el" href="key_8c-source.html#l01088">keyGetFullRootNameSize()</a>, <a class="el" href="key_8c-source.html#l00747">keyGetName()</a>, <a class="el" href="key_8c-source.html#l00724">keyGetNameSize()</a>, <a class="el" href="key_8c-source.html#l01999">keyGetOwner()</a>, <a class="el" href="key_8c-source.html#l01962">keyGetOwnerSize()</a>, <a class="el" href="key_8c-source.html#l01168">keyGetParentNameSize()</a>, <a class="el" href="key_8c-source.html#l01257">keyNameGetBaseNameSize()</a>, <a class="el" href="key_8c-source.html#l00693">keySetBaseName()</a>, <a class="el" href="key_8c-source.html#l02057">keySetComment()</a>, <a class="el" href="key_8c-source.html#l01546">keySetLink()</a>, <a class="el" href="key_8c-source.html#l00486">keySetName()</a>, <a class="el" href="key_8c-source.html#l01911">keySetOwner()</a>, <a class="el" href="key_8c-source.html#l01409">keySetString()</a>, <a class="el" href="key_8c-source.html#l03074">ksLookupByName()</a>, and <a class="el" href="key_8c-source.html#l03284">ksLookupByValue()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="template.c::kdbOpen_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbOpen_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the backend. 
<p>
This is the first method <a class="el" href="group__kdb.html#ga2">kdbOpenBackend()</a> calls after dynamically loading the backend library.<p>
This method is responsible of:<ul>
<li>backend's specific configuration gathering</li><li>all backend's internal structs initialization</li><li>initial setup of all I/O details such as opening a file, connecting to a database, etc</li></ul>
<p>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, anything else otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga2">kdbOpenBackend()</a> <p>
<a class="el" href="group__kdb.html#ga0">kdbOpen()</a> </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00133">133</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="template.c::kdbClose_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbClose_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
All finalization logic of the backend should go here. 
<p>
Called prior to unloading the backend dynamic module. Should ensure that no functions or static/global variables from the module will ever be accessed again. Should free any memory that the backend no longer needs. After this call, libkdb.so will unload the backend library, so this is the point to shutdown any affairs with the storage.<p>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, anything else otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga3">kdbClose()</a> </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00154">154</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga11" doxytag="template.c::kdbStatKey_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbStatKey_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation for <a class="el" href="group__kdb.html#ga13">kdbStatKey()</a> method. 
<p>
This method is responsible of:<ul>
<li>make necessary I/O to retrieve <code>key-&gt;name's</code> metadata</li><li>fill the <code>key</code> struct with its metadata</li></ul>
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga13">kdbStatKey()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00171">171</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga12" doxytag="template.c::kdbGetKey_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbGetKey_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation for <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> method. 
<p>
This method is responsible of:<ul>
<li>make necessary I/O to retrieve all <code>key-&gt;name's</code> value and metadata</li><li>fill the <code>key</code> struct with its value and metadata</li></ul>
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00187">187</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga13" doxytag="template.c::kdbSetKey_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbSetKey_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation for <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> method. 
<p>
This method is responsible of:<ul>
<li>check the existence of <code>key-&gt;name</code> on persistent storage</li><li>prepare the backend to receive a new or updated key</li><li>use value and metadata from <code>key</code> to store them in the backend storage</li><li>fill the <code>key</code> struct with its value and metadata</li></ul>
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00206">206</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga14" doxytag="template.c::kdbRename_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbRename_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>newName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation for <a class="el" href="group__kdb.html#ga17">kdbRename()</a> method. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga17">kdbRename()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00219">219</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga15" doxytag="template.c::kdbRemoveKey_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbRemoveKey_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation for <a class="el" href="group__kdb.html#ga18">kdbRemoveKey()</a> method. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga19">kdbRemove()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00233">233</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga16" doxytag="template.c::kdbGetKeyChildKeys_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t kdbGetKeyChildKeys_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>parentKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>options</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation for <a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a> method. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00247">247</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00178">_KeySet::size</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga17" doxytag="template.c::kdbSetKeys_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbSetKeys_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ks</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation for <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> method. 
<p>
The implementation of this method is optional, and a builtin, probablly inefficient implementation can be explicitly used when exporting the backend with <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a>, using <a class="el" href="group__backend.html#ga4">kdbSetKeys_default()</a>.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00263">263</a> of file <a class="el" href="template_8c-source.html">template.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga18" doxytag="template.c::kdbMonitorKeys_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int32_t kdbMonitorKeys_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>interests</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_int32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>diffMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>iterations</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>sleep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The implementation of this method is optional. 
<p>
The builtin inefficient implementation will use <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> for each key inside <code>interests</code>.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00277">277</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga19" doxytag="template.c::kdbMonitorKey_backend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int32_t kdbMonitorKey_backend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>interest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_int32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>diffMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>iterations</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>sleep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The implementation of this method is optional. 
<p>
The builtin inefficient implementation will use <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> for <code>interest</code>.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a> for expected behavior. </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00293">293</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
Referenced by <a class="el" href="template_8c-source.html#l00314">kdbBackendFactory()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga20" doxytag="template.c::kdbBackendFactory"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">KDBBackend* kdbBackendFactory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
All KeyDB methods implemented by the backend can have random names, except <a class="el" href="group__backend.html#ga20">kdbBackendFactory()</a>. 
<p>
This is the single symbol that will be looked up when loading the backend, and the first method of the backend implementation that will be called.<p>
Its purpose is to "publish" the exported methods for libkdb.so. The implementation inside the provided skeleton is usually enough: simply call <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a> with all methods that must be exported.<p>
<dl compact><dt><b>Returns:</b></dt><dd>whatever <a class="el" href="group__backend.html#ga7">kdbBackendExport()</a> returns </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__backend.html#ga7">kdbBackendExport()</a> for an example <p>
<a class="el" href="group__kdb.html#ga2">kdbOpenBackend()</a> </dd></dl>

<p>
Definition at line <a class="el" href="template_8c-source.html#l00314">314</a> of file <a class="el" href="template_8c-source.html">template.c</a>.
<p>
References <a class="el" href="group__backend.html#gga21a3">KDB_BE_CLOSE</a>, <a class="el" href="group__backend.html#gga21a13">KDB_BE_END</a>, <a class="el" href="group__backend.html#gga21a10">KDB_BE_GETCHILD</a>, <a class="el" href="group__backend.html#gga21a5">KDB_BE_GETKEY</a>, <a class="el" href="group__backend.html#gga21a11">KDB_BE_MONITORKEY</a>, <a class="el" href="group__backend.html#gga21a12">KDB_BE_MONITORKEYS</a>, <a class="el" href="group__backend.html#gga21a2">KDB_BE_OPEN</a>, <a class="el" href="group__backend.html#gga21a9">KDB_BE_REMOVEKEY</a>, <a class="el" href="group__backend.html#gga21a8">KDB_BE_RENAME</a>, <a class="el" href="group__backend.html#gga21a6">KDB_BE_SETKEY</a>, <a class="el" href="group__backend.html#gga21a7">KDB_BE_SETKEYS</a>, <a class="el" href="group__backend.html#gga21a4">KDB_BE_STATKEY</a>, <a class="el" href="libkdb_8c-source.html#l01336">kdbBackendExport()</a>, <a class="el" href="template_8c-source.html#l00154">kdbClose_backend()</a>, <a class="el" href="template_8c-source.html#l00187">kdbGetKey_backend()</a>, <a class="el" href="template_8c-source.html#l00247">kdbGetKeyChildKeys_backend()</a>, <a class="el" href="template_8c-source.html#l00293">kdbMonitorKey_backend()</a>, <a class="el" href="template_8c-source.html#l00277">kdbMonitorKeys_backend()</a>, <a class="el" href="template_8c-source.html#l00133">kdbOpen_backend()</a>, <a class="el" href="template_8c-source.html#l00233">kdbRemoveKey_backend()</a>, <a class="el" href="template_8c-source.html#l00219">kdbRename_backend()</a>, <a class="el" href="template_8c-source.html#l00206">kdbSetKey_backend()</a>, <a class="el" href="libkdb_8c-source.html#l00884">kdbSetKeys_default()</a>, and <a class="el" href="template_8c-source.html#l00171">kdbStatKey_backend()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat Jul 30 09:10:59 2005 for Elektra Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
