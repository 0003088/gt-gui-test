<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Elektra Project: Key :: Basic Methods</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>Key :: Basic Methods</h1>Key construction and initialization methods.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga5">KeyType</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga5a7">KEY_TYPE_UNDEFINED</a> = 0, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga5a8">KEY_TYPE_DIR</a> = 1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga5a9">KEY_TYPE_LINK</a> = 2, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga5a10">KEY_TYPE_BINARY</a> = 20, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga5a11">KEY_TYPE_STRING</a> = 40
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Key data types.  <a href="#ga5">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga6">KeyNamespace</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga6a12">KEY_NS_SYSTEM</a> = 1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga6a13">KEY_NS_USER</a> = 2
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Elektra currently supported Key namespaces.  <a href="#ga6">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga7">KeySwitch</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a14">KEY_SWITCH_TYPE</a> = 1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a15">KEY_SWITCH_NAME</a> = 1&lt;&lt;1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a16">KEY_SWITCH_VALUE</a> = 1&lt;&lt;2, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a17">KEY_SWITCH_OWNER</a> = 1&lt;&lt;5, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a18">KEY_SWITCH_DOMAIN</a> = KEY_SWITCH_OWNER, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a19">KEY_SWITCH_COMMENT</a> = 1&lt;&lt;6, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a20">KEY_SWITCH_UID</a> = 1&lt;&lt;7, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a21">KEY_SWITCH_GID</a> = 1&lt;&lt;8, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a22">KEY_SWITCH_MODE</a> = 1&lt;&lt;10, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a23">KEY_SWITCH_TIME</a> = 1&lt;&lt;11, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a24">KEY_SWITCH_NEEDSYNC</a> = 1&lt;&lt;12
, <br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a26">KEY_SWITCH_ISSYSTEM</a> = 1&lt;&lt;23, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a27">KEY_SWITCH_ISUSER</a> = 1&lt;&lt;24, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a28">KEY_SWITCH_FLAG</a> = 1&lt;&lt;31, 
<br>
&nbsp;&nbsp;<a class="el" href="group__key.html#gga7a29">KEY_SWITCH_END</a> = 0
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Switches to denote the various Key attributes in methods throughout this library.  <a href="#ga7">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga0">keyNew</a> (const char *keyName,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A practical way to fully create a Key object in one step.  <a href="#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga1">keyDel</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A destructor for Key objects.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga2">keyDup</a> (const <a class="el" href="struct__Key.html">Key</a> *source, <a class="el" href="struct__Key.html">Key</a> *dest)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clone a key.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga3">keyInit</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a previously allocated Key object.  <a href="#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__key.html#ga4">keyClose</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finishes the usage of a Key object.  <a href="#ga4"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Key construction and initialization methods. 
<p>
To use them: <div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;kdb.h&gt;</span>
</pre></div><p>
A Key is the essential class that encapsulates key <a class="el" href="group__keyname.html">name </a>, <a class="el" href="group__keyvalue.html">value </a> and <a class="el" href="group__keymeta.html">metainfo </a>. Key properties are:<ul>
<li><a class="el" href="group__keyname.html">Key name </a></li><li><a class="el" href="group__keyvalue.html">Key value </a></li><li><a class="el" href="group__keyvalue.html#ga10">Data type </a></li><li><a class="el" href="group__keymeta.html#ga6">Key comment </a></li><li><a class="el" href="group__keymeta.html#ga2">User domain </a> (the user that owns the key)</li><li><a class="el" href="group__keymeta.html">UID, GID and filesystem-like access permissions </a></li><li><a class="el" href="group__keymeta.html">Access, change and modification times </a></li><li><a class="el" href="group__keymeta.html#ga17">A general flag </a></li></ul>
<p>
Described here the methods to allocate and free the key. <hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="ga5" doxytag="kdb.h::KeyType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="group__key.html#ga5">KeyType</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Key data types. 
<p>
Key type values grow from the semantically poor to the semantically rich. The gaps between them is for user-defined types.<p>
If your application needs value types with more semantics, like <code>Color</code>, <code>Font</code>, etc, you can still use it. You'll have to define a new type number in the scope of your application, and force the type with <a class="el" href="group__keyvalue.html#ga10">keySetType()</a>, or <a class="el" href="group__key.html#ga0">keyNew()</a>.<p>
The type number is a value between 0 and 255. If your user-defined type &gt;= <code>KEY_TYPE_STRING</code>, it will be still treated as a string (in the terms of Unicode handling). If <code>KEY_TYPE_BINARY</code> &lt;= type &lt; <code>KEY_TYPE_STRING</code>, Elektra will handle it as a binary value, will not make Unicode handling and will save it hex-encoded.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga9">keyGetType()</a> <p>
<a class="el" href="group__keyvalue.html#ga10">keySetType()</a> for an example of how to define custom types </dd></dl>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gga5a7" doxytag="KEY_TYPE_UNDEFINED"></a>KEY_TYPE_UNDEFINED</em>&nbsp;</td><td>
Undefined key type </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga5a8" doxytag="KEY_TYPE_DIR"></a>KEY_TYPE_DIR</em>&nbsp;</td><td>
A directory key </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga5a9" doxytag="KEY_TYPE_LINK"></a>KEY_TYPE_LINK</em>&nbsp;</td><td>
A symbolink link key. This gap is for special key meta types, that can't go into regular files. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga5a10" doxytag="KEY_TYPE_BINARY"></a>KEY_TYPE_BINARY</em>&nbsp;</td><td>
A binary key. This gap is for binary data types that have some semantics that somebody can invent in the future </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga5a11" doxytag="KEY_TYPE_STRING"></a>KEY_TYPE_STRING</em>&nbsp;</td><td>
A string key </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kdb_8h-source.html#l00072">72</a> of file <a class="el" href="kdb_8h-source.html">kdb.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="kdb.h::KeyNamespace"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="group__key.html#ga6">KeyNamespace</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Elektra currently supported Key namespaces. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga12">kdbGetRootKeys()</a>, <a class="el" href="group__keytest.html#ga2">keyGetNamespace()</a>, <a class="el" href="group__keytest.html#ga1">keyNameGetNamespace()</a> </dd></dl>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gga6a12" doxytag="KEY_NS_SYSTEM"></a>KEY_NS_SYSTEM</em>&nbsp;</td><td>
The <code>system</code> keys </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga6a13" doxytag="KEY_NS_USER"></a>KEY_NS_USER</em>&nbsp;</td><td>
The <code>user</code> keys </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kdb_8h-source.html#l00095">95</a> of file <a class="el" href="kdb_8h-source.html">kdb.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="kdb.h::KeySwitch"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="group__key.html#ga7">KeySwitch</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Switches to denote the various Key attributes in methods throughout this library. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga0">keyNew()</a> <p>
<a class="el" href="group__keytest.html#ga9">keyCompare()</a> <p>
<a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a>, <a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a>, the diffMask parameter <p>
<a class="el" href="group__keymeta.html#ga19">keyGetFlag()</a>, <a class="el" href="group__keymeta.html#ga17">keySetFlag()</a> </dd></dl>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gga7a14" doxytag="KEY_SWITCH_TYPE"></a>KEY_SWITCH_TYPE</em>&nbsp;</td><td>
Flag for the key type </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a15" doxytag="KEY_SWITCH_NAME"></a>KEY_SWITCH_NAME</em>&nbsp;</td><td>
Flag for the key name </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a16" doxytag="KEY_SWITCH_VALUE"></a>KEY_SWITCH_VALUE</em>&nbsp;</td><td>
Flag for the key data </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a17" doxytag="KEY_SWITCH_OWNER"></a>KEY_SWITCH_OWNER</em>&nbsp;</td><td>
Flag for the key user domain </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a18" doxytag="KEY_SWITCH_DOMAIN"></a>KEY_SWITCH_DOMAIN</em>&nbsp;</td><td>
An alias </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a19" doxytag="KEY_SWITCH_COMMENT"></a>KEY_SWITCH_COMMENT</em>&nbsp;</td><td>
Flag for the key comment </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a20" doxytag="KEY_SWITCH_UID"></a>KEY_SWITCH_UID</em>&nbsp;</td><td>
Flag for the key UID </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a21" doxytag="KEY_SWITCH_GID"></a>KEY_SWITCH_GID</em>&nbsp;</td><td>
Flag for the key GID </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a22" doxytag="KEY_SWITCH_MODE"></a>KEY_SWITCH_MODE</em>&nbsp;</td><td>
Flag for the key permissions </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a23" doxytag="KEY_SWITCH_TIME"></a>KEY_SWITCH_TIME</em>&nbsp;</td><td>
Flag for the key change time </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a24" doxytag="KEY_SWITCH_NEEDSYNC"></a>KEY_SWITCH_NEEDSYNC</em>&nbsp;</td><td>
Flags that key needs syncronization </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a26" doxytag="KEY_SWITCH_ISSYSTEM"></a>KEY_SWITCH_ISSYSTEM</em>&nbsp;</td><td>
Flag to denote a <code>"system"</code> key </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a27" doxytag="KEY_SWITCH_ISUSER"></a>KEY_SWITCH_ISUSER</em>&nbsp;</td><td>
Flag to denote a <code>"user"</code> key </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a28" doxytag="KEY_SWITCH_FLAG"></a>KEY_SWITCH_FLAG</em>&nbsp;</td><td>
General purpose flag that has semantics only to your app </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga7a29" doxytag="KEY_SWITCH_END"></a>KEY_SWITCH_END</em>&nbsp;</td><td>
Used as a parameter terminator to <a class="el" href="group__key.html#ga0">keyNew()</a> </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kdb_8h-source.html#l00135">135</a> of file <a class="el" href="kdb_8h-source.html">kdb.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="key.c::keyNew"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a>* keyNew           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keyName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A practical way to fully create a Key object in one step. 
<p>
This function tries to mimic the C++ way for constructors.<p>
Due to ABI compatibility, the <code>Key</code> structure is not defined in <a class="el" href="kdb_8h.html">kdb.h</a>, only declared. So you can only declare <code>pointers</code> to <code>Keys</code> in your program, and allocate and free memory for them with <a class="el" href="group__key.html#ga0">keyNew()</a> and <a class="el" href="group__key.html#ga1">keyDel()</a> respectively. See <a href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN135">http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN135</a><p>
You can call it in many different ways depending on the attribute tags you pass as parameters. Tags are represented as the <a class="el" href="group__key.html#ga7">KeySwitch</a> values, and tell <a class="el" href="group__key.html#ga0">keyNew()</a> which Key attribute comes next.<p>
The simplest way to call it is with no tags, only a key name. See example bellow.<p>
The Key attribute tags are the following:<ul>
<li><a class="el" href="group__key.html#gga7a14">KeySwitch::KEY_SWITCH_TYPE</a> <br>
 This tag requires 1 or 2 more parameters. The first is obviously the type. If the type is <a class="el" href="group__key.html#gga5a10">KeySwitch::KEY_TYPE_BINARY</a> or any other binary-like user-defined type (see <a class="el" href="group__keyvalue.html#ga10">keySetType()</a>), a second parameter is needed and is the size in bytes (size_t) of the data passed on the subsequent <a class="el" href="group__key.html#gga7a16">KeySwitch::KEY_SWITCH_VALUE</a> parameter. You must use this tag before <a class="el" href="group__key.html#gga7a16">KeySwitch::KEY_SWITCH_VALUE</a>, otherwise <a class="el" href="group__key.html#gga5a11">KeyType::KEY_TYPE_STRING</a> is assumed.</li><li><a class="el" href="group__key.html#gga7a16">KeySwitch::KEY_SWITCH_VALUE</a> <br>
 Next parameter is a pointer to the value that will be set to the key. If no <a class="el" href="group__key.html#gga7a14">KeySwitch::KEY_SWITCH_TYPE</a> was used before, <a class="el" href="group__key.html#gga5a11">KeySwitch::KEY_TYPE_STRING</a> is assumed.</li><li><a class="el" href="group__key.html#gga7a20">KeySwitch::KEY_SWITCH_UID</a>, <code><a class="el" href="group__key.html#gga7a21">KeySwitch::KEY_SWITCH_GID</a></code> <br>
 Next parameter is taken as the UID (uid_t) or GID (gid_t) that will be defined on the key. See <a class="el" href="group__keymeta.html#ga9">keySetUID()</a> and <a class="el" href="group__keymeta.html#ga11">keySetGID()</a>.</li><li><a class="el" href="group__key.html#gga7a22">KeySwitch::KEY_SWITCH_MODE</a> <br>
 Next parameter is taken as access permissions (mode_t) to the key. See <a class="el" href="group__keymeta.html#ga13">keySetAccess()</a>.</li><li><a class="el" href="group__key.html#gga7a18">KeySwitch::KEY_SWITCH_DOMAIN</a> <br>
 Next parameter is the user domain. See <a class="el" href="group__keymeta.html#ga0">keySetOwner()</a>.</li><li><a class="el" href="group__key.html#gga7a19">KeySwitch::KEY_SWITCH_COMMENT</a> <br>
 Next parameter is a comment. See <a class="el" href="group__keymeta.html#ga4">keySetComment()</a>.</li><li><a class="el" href="group__key.html#gga7a24">KeySwitch::KEY_SWITCH_NEEDSYNC</a> <br>
 Needs no extra parameter. Makes <a class="el" href="group__key.html#ga0">keyNew()</a> retrieve the Key from the backend with <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>. In the same <a class="el" href="group__key.html#ga0">keyNew()</a> call you can use this tag in conjunction with any other, which will make <a class="el" href="group__key.html#ga0">keyNew()</a> modify only some attributes of the retrieved key, and return it for you. Order of parameters do matter. If the internal call to <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> failed, you'll still have a valid, but flaged, key. Check with <a class="el" href="group__keymeta.html#ga19">keyGetFlag()</a>, and <code>errno</code>. You will have to <a class="el" href="group__kdb.html#ga0">kdbOpen()</a> before using <a class="el" href="group__key.html#ga0">keyNew()</a> with this tag.</li><li><a class="el" href="group__key.html#gga7a29">KeySwitch::KEY_SWITCH_END</a> <br>
 Must be the last parameter passed to <a class="el" href="group__key.html#ga0">keyNew()</a>. It is allways required, unless the <code>keyName</code> is NULL too.</li></ul>
<p>
<dl compact><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment">KeySet *ks=<a class="code" href="group__keyset.html#ga0">ksNew</a>();

<a class="code" href="group__kdb.html#ga0">kdbOpen</a>();
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(KEY_SWITCH_END));       <span class="comment">// an empty key</span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/sw"</span>,              <span class="comment">// a simple key</span>
    KEY_SWITCH_END));                      <span class="comment">// no more args</span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"system/sw"</span>,
    KEY_SWITCH_NEEDSYNC,                   <span class="comment">// a key retrieved from storage</span>
    KEY_SWITCH_END));                      <span class="comment">// end of args               </span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/tmp/ex1"</span>,
    KEY_SWITCH_VALUE,<span class="stringliteral">"some data"</span>,          <span class="comment">// with a simple value</span>
    KEY_SWITCH_END));                      <span class="comment">// end of args</span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/tmp/ex2"</span>,
    KEY_SWITCH_VALUE,<span class="stringliteral">"some data"</span>,          <span class="comment">// with a simple value</span>
    KEY_SWITCH_MODE,0777,                  <span class="comment">// permissions</span>
    KEY_SWITCH_END));                      <span class="comment">// end of args</span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/tmp/ex3"</span>,
    KEY_SWITCH_TYPE,KEY_TYPE_LINK,         <span class="comment">// only type</span>
    KEY_SWITCH_VALUE,<span class="stringliteral">"system/mtp/x"</span>,       <span class="comment">// link destination</span>
    KEY_SWITCH_MODE,0654,                  <span class="comment">// weird permissions</span>
    KEY_SWITCH_END));                      <span class="comment">// end of args</span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/tmp/ex4"</span>,
    KEY_SWITCH_TYPE,KEY_TYPE_BINARY,7,     <span class="comment">// key type and value size (because it is binary)</span>
    KEY_SWITCH_DOMAIN,<span class="stringliteral">"root"</span>,              <span class="comment">// owner (not uid) is root</span>
    KEY_SWITCH_VALUE,<span class="stringliteral">"some data"</span>,          <span class="comment">// value that will be truncated</span>
    KEY_SWITCH_COMMENT,<span class="stringliteral">"value is truncated"</span>,
    KEY_SWITCH_UID,0,                      <span class="comment">// root uid</span>
    KEY_SWITCH_END));                      <span class="comment">// end of args</span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/env/alias/ls"</span>,    <span class="comment">// a key we know we have</span>
    KEY_SWITCH_NEEDSYNC,                   <span class="comment">// retrieve from storage</span>
    KEY_SWITCH_END));                      <span class="comment">// do nothing more</span>
    
<a class="code" href="group__keyset.html#ga16">ksAppend</a>(ks,<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/env/alias/ls"</span>,    <span class="comment">// same key</span>
    KEY_SWITCH_NEEDSYNC,                   <span class="comment">// retrieve from storage</span>
    KEY_SWITCH_DOMAIN,<span class="stringliteral">"root"</span>,              <span class="comment">// set new owner (not uid) as root</span>
    KEY_SWITCH_COMMENT,<span class="stringliteral">"new comment"</span>,      <span class="comment">// set new comment</span>
    KEY_SWITCH_END));                      <span class="comment">// end of args</span>
    
<a class="code" href="group__keyset.html#ga19">ksToStream</a>(ks,stdout,KDB_O_XMLHEADERS);
    
<a class="code" href="group__keyset.html#ga1">ksDel</a>(ks);
<a class="code" href="group__kdb.html#ga3">kdbClose</a>();
</pre></div></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>keyName</em>&nbsp;</td><td>a valid name to the key, or NULL to get a simple initialized, but really empty, object </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga1">keyDel()</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to a new allocated and initialized Key object, or NULL if an invalid <code>keyName</code> was passed (see <a class="el" href="group__keyname.html#ga0">keySetName()</a>). </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l00321">321</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00127">_Key::flags</a>, <a class="el" href="libkdb_8c-source.html#l00825">kdbGetKey()</a>, <a class="el" href="group__key.html#gga7a19">KEY_SWITCH_COMMENT</a>, <a class="el" href="group__key.html#gga7a18">KEY_SWITCH_DOMAIN</a>, <a class="el" href="group__key.html#gga7a21">KEY_SWITCH_GID</a>, <a class="el" href="group__key.html#gga7a22">KEY_SWITCH_MODE</a>, <a class="el" href="group__key.html#gga7a24">KEY_SWITCH_NEEDSYNC</a>, <a class="el" href="group__key.html#gga7a14">KEY_SWITCH_TYPE</a>, <a class="el" href="group__key.html#gga7a20">KEY_SWITCH_UID</a>, <a class="el" href="group__key.html#gga7a16">KEY_SWITCH_VALUE</a>, <a class="el" href="group__key.html#gga5a10">KEY_TYPE_BINARY</a>, <a class="el" href="key_8c-source.html#l02832">keyInit()</a>, <a class="el" href="key_8c-source.html#l02347">keySetAccess()</a>, <a class="el" href="key_8c-source.html#l02057">keySetComment()</a>, <a class="el" href="key_8c-source.html#l02310">keySetGID()</a>, <a class="el" href="key_8c-source.html#l00486">keySetName()</a>, <a class="el" href="key_8c-source.html#l01911">keySetOwner()</a>, <a class="el" href="key_8c-source.html#l01853">keySetRaw()</a>, <a class="el" href="key_8c-source.html#l01409">keySetString()</a>, <a class="el" href="key_8c-source.html#l01814">keySetType()</a>, and <a class="el" href="key_8c-source.html#l02271">keySetUID()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00923">commandEdit()</a>, <a class="el" href="kdb_8c-source.html#l00809">commandGet()</a>, <a class="el" href="kdb_8c-source.html#l00679">commandList()</a>, <a class="el" href="kdb_8c-source.html#l01154">commandMonitor()</a>, <a class="el" href="kdb_8c-source.html#l00461">commandMove()</a>, <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="libkdb_8c-source.html#l00738">kdbGetChildKeys()</a>, <a class="el" href="libkdb_8c-source.html#l00763">kdbGetRootKeys()</a>, <a class="el" href="libkdb_8c-source.html#l00494">kdbGetValue()</a>, <a class="el" href="libkdb_8c-source.html#l01017">kdbLink()</a>, <a class="el" href="libkdb_8c-source.html#l01209">kdbMonitorKey_default()</a>, <a class="el" href="libkdb_8c-source.html#l00985">kdbRemove()</a>, and <a class="el" href="libkdb_8c-source.html#l00522">kdbSetValue()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="key.c::keyDel"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int keyDel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A destructor for Key objects. 
<p>
Every key created by <a class="el" href="group__key.html#ga0">keyNew()</a> must be deleted with <a class="el" href="group__key.html#ga1">keyDel()</a>. It will <a class="el" href="group__key.html#ga4">keyClose()</a> and free() the <code>key</code> pointer.<p>
There is the <code>keyFree()</code> macro if you prefer this method name.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga0">keyNew()</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>whatever is returned by <a class="el" href="group__key.html#ga4">keyClose()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l00424">424</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="key_8c-source.html#l02862">keyClose()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00923">commandEdit()</a>, <a class="el" href="kdb_8c-source.html#l00809">commandGet()</a>, <a class="el" href="kdb_8c-source.html#l00679">commandList()</a>, <a class="el" href="kdb_8c-source.html#l01154">commandMonitor()</a>, <a class="el" href="kdb_8c-source.html#l00461">commandMove()</a>, <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="libkdb_8c-source.html#l00738">kdbGetChildKeys()</a>, <a class="el" href="libkdb_8c-source.html#l00763">kdbGetRootKeys()</a>, <a class="el" href="libkdb_8c-source.html#l00494">kdbGetValue()</a>, <a class="el" href="libkdb_8c-source.html#l01017">kdbLink()</a>, <a class="el" href="libkdb_8c-source.html#l01209">kdbMonitorKey_default()</a>, <a class="el" href="libkdb_8c-source.html#l00985">kdbRemove()</a>, <a class="el" href="libkdb_8c-source.html#l00522">kdbSetValue()</a>, <a class="el" href="key_8c-source.html#l03827">ksClose()</a>, and <a class="el" href="key_8c-source.html#l03612">ksCompare()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="key.c::keyDup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int keyDup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dest</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clone a key. 
<p>
All private attributes of the source key will be copied, including its context on a KeySet, and nothing will be shared between both keys. <a class="el" href="group__key.html#ga4">keyClose()</a> will be used on <code>dest</code> key before the operation, and internal buffers will be automatically allocated on <code>dest</code>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>source</em>&nbsp;</td><td>the source key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dest</em>&nbsp;</td><td>the new copy of the key </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga4">keyClose()</a>, <a class="el" href="group__key.html#ga3">keyInit()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l02211">2211</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00139">_Key::comment</a>, <a class="el" href="kdbprivate_8h-source.html#l00151">_Key::data</a>, <a class="el" href="kdbprivate_8h-source.html#l00120">_Key::dataSize</a>, <a class="el" href="kdbprivate_8h-source.html#l00127">_Key::flags</a>, <a class="el" href="kdbprivate_8h-source.html#l00133">_Key::key</a>, <a class="el" href="key_8c-source.html#l02862">keyClose()</a>, <a class="el" href="key_8c-source.html#l02057">keySetComment()</a>, <a class="el" href="key_8c-source.html#l00486">keySetName()</a>, <a class="el" href="key_8c-source.html#l01911">keySetOwner()</a>, <a class="el" href="key_8c-source.html#l01853">keySetRaw()</a>, and <a class="el" href="kdbprivate_8h-source.html#l00145">_Key::userDomain</a>.
<p>
Referenced by <a class="el" href="libkdb_8c-source.html#l01209">kdbMonitorKey_default()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="key.c::keyInit"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int keyInit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes a previously allocated Key object. 
<p>
This function should not be used, use <a class="el" href="group__key.html#ga0">keyNew()</a> instead.<p>
keyInit sets the key to a clear state. It uses memset to clear the memory. The type of the key is KEY_TYPE_UNDEFINED afterwards.<p>
uid, gid and access masks are set with the current values of your system.<p>
<dl compact><dt><b>example</b></dt><dd>code key=(Key *)malloc(sizeof(Key)); if (!key) return 0; keyInit(key); endcode </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga0">keyNew()</a>, <a class="el" href="group__key.html#ga1">keyDel()</a>, <a class="el" href="group__key.html#ga4">keyClose()</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>allways 0; </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l02832">2832</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00090">_Key::access</a>, <a class="el" href="kdbprivate_8h-source.html#l00127">_Key::flags</a>, <a class="el" href="kdbprivate_8h-source.html#l00084">_Key::gid</a>, <a class="el" href="kdbprivate_8h-source.html#l00072">_Key::type</a>, and <a class="el" href="kdbprivate_8h-source.html#l00078">_Key::uid</a>.
<p>
Referenced by <a class="el" href="key_8c-source.html#l00321">keyNew()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="key.c::keyClose"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int keyClose           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finishes the usage of a Key object. 
<p>
Frees all internally allocated memory, and leave the Key object ready to be <a class="el" href="group__key.html#ga3">keyInit()</a>ed to reuse, or deallocated.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga3">keyInit()</a> for usage example <p>
<a class="el" href="group__key.html#ga0">keyNew()</a> and <a class="el" href="group__key.html#ga1">keyDel()</a> as a more practicall approach for Key construction and destruction </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>allways 0; </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l02862">2862</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00139">_Key::comment</a>, <a class="el" href="kdbprivate_8h-source.html#l00151">_Key::data</a>, <a class="el" href="kdbprivate_8h-source.html#l00133">_Key::key</a>, and <a class="el" href="kdbprivate_8h-source.html#l00145">_Key::userDomain</a>.
<p>
Referenced by <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, and <a class="el" href="key_8c-source.html#l02211">keyDup()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat Jul 30 09:10:59 2005 for Elektra Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
