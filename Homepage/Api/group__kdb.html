<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Elektra Project: KeyDB :: Class Methods</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>KeyDB :: Class Methods</h1>General methods to access the Key database.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga23">KDBErr</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a45">KDB_RET_OK</a> = 0, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a46">KDB_RET_NULLKEY</a> = EINVAL, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a47">KDB_RET_UNINITIALIZED</a> = EINVAL, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a48">KDB_RET_NOTFOUND</a> = ENOENT, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a49">KDB_RET_INVALIDKEY</a> = EAFNOSUPPORT, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a50">KDB_RET_NOKEY</a> = EBADMSG, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a51">KDB_RET_NODATA</a> = ENOMSG, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a52">KDB_RET_NODESC</a> = EIDRM, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a53">KDB_RET_NODOMAIN</a> = EDOM, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a54">KDB_RET_NOGROUP</a> = ECHILD, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a55">KDB_RET_NOTIME</a> = EMULTIHOP, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a56">KDB_RET_NOCRED</a> = EACCES, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a57">KDB_RET_TRUNC</a> = ENOBUFS, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a58">KDB_RET_NOMEM</a> = ENOMEM, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a59">KDB_RET_TYPEMISMATCH</a> = EILSEQ, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a60">KDB_RET_NOSYS</a> = ENOSYS, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga23a61">KDB_RET_EBACKEND</a> = EIO
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Some return codes generated by the Elektra library.  <a href="#ga23">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga24">KDBOptions</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a62">KDB_O_RECURSIVE</a> = 1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a63">KDB_O_DIR</a> = 1&lt;&lt;1, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a64">KDB_O_DIRONLY</a> = 1&lt;&lt;2
, <br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a66">KDB_O_STATONLY</a> = 1&lt;&lt;4, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a67">KDB_O_INACTIVE</a> = 1&lt;&lt;5, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a68">KDB_O_SORT</a> = 1&lt;&lt;6, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a69">KDB_O_NFOLLOWLINK</a> = 1&lt;&lt;7, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a70">KDB_O_CONDENSED</a> = 1&lt;&lt;8, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a71">KDB_O_NUMBERS</a> = 1&lt;&lt;9, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a72">KDB_O_XMLHEADERS</a> = 1&lt;&lt;10, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a73">KDB_O_FULLNAME</a> = 1&lt;&lt;11, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a74">KDB_O_FULLUGID</a> = 1&lt;&lt;12, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a75">KDB_O_NOCASE</a> = 1&lt;&lt;15, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kdb.html#gga24a76">KDB_O_NOSPANPARENT</a> = 1&lt;&lt;16
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Options to change the default behavior of some methods.  <a href="#ga24">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga0">kdbOpen</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens the session with the Key database, using a backend defined by environment var <em>$KDB_BACKEND</em>.  <a href="#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga1">kdbOpenDefault</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens the session with the Key database.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga2">kdbOpenBackend</a> (char *backendName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens the session with the Key database, dynamically loading a specific beckend for libelektra.so.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga3">kdbClose</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes the session with the Key database.  <a href="#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga4">kdbGetValue</a> (const char *keyname, char *returned, size_t maxSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A high-level method to get a key value, by key name.  <a href="#ga4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga5">kdbSetValue</a> (const char *keyname, const char *value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A high-level method to set a value to a key, by key name.  <a href="#ga5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga6">kdbGetValueByParent</a> (const char *parentName, const char *baseName, char *returned, size_t maxSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fills the <code>returned</code> buffer with the value of a key, which name is the concatenation of <code>parentName</code> and <code>baseName</code>.  <a href="#ga6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga7">kdbSetValueByParent</a> (const char *parentName, const char *baseName, const char *value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the provided <code>value</code> to the key whose name is the concatenation of <code>parentName</code> and <code>baseName</code>.  <a href="#ga7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga8">kdbGetKeyByParent</a> (const char *parentName, const char *baseName, <a class="el" href="struct__Key.html">Key</a> *returned)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Given a parent key name plus a basename, returns the key.  <a href="#ga8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga9">kdbGetKeyByParentKey</a> (const <a class="el" href="struct__Key.html">Key</a> *parent, const char *baseName, <a class="el" href="struct__Key.html">Key</a> *returned)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Similar to previous, provided for convenience.  <a href="#ga9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys</a> (const <a class="el" href="struct__Key.html">Key</a> *parentKey, <a class="el" href="struct__KeySet.html">KeySet</a> *returned, unsigned long options)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a number of inter-related keys in one shot.  <a href="#ga10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga11">kdbGetChildKeys</a> (const char *parentName, <a class="el" href="struct__KeySet.html">KeySet</a> *returned, unsigned long options)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is similar and calls <a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a>.  <a href="#ga11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga12">kdbGetRootKeys</a> (<a class="el" href="struct__KeySet.html">KeySet</a> *returned)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a KeySet with all root keys currently recognized and present on the system.  <a href="#ga12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga13">kdbStatKey</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Taps the key only for its meta-info from the backend storage.  <a href="#ga13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga14">kdbGetKey</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fully retrieves the passed <code>key</code> from the backend storage.  <a href="#ga14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga15">kdbSetKeys</a> (<a class="el" href="struct__KeySet.html">KeySet</a> *ks)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Commits the <code>ks</code> KeySet to the backend storage, starting from <code>ks's</code> current position until its end.  <a href="#ga15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga16">kdbSetKey</a> (<a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets <code>key</code> in the backend storage.  <a href="#ga16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga17">kdbRename</a> (<a class="el" href="struct__Key.html">Key</a> *key, const char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rename a key in the backend storage.  <a href="#ga17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga18">kdbRemoveKey</a> (const <a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a key from the backend storage.  <a href="#ga18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga19">kdbRemove</a> (const char *keyName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a key by its name from the backend storage.  <a href="#ga19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga20">kdbLink</a> (const char *oldPath, const char *newKeyName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a link key on the backend storage that points to other key.  <a href="#ga20"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga21">kdbMonitorKeys</a> (<a class="el" href="struct__KeySet.html">KeySet</a> *interests, u_int32_t diffMask, unsigned long iterations, unsigned sleep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Monitor a KeySet for some key change.  <a href="#ga21"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kdb.html#ga22">kdbMonitorKey</a> (<a class="el" href="struct__Key.html">Key</a> *interest, u_int32_t diffMask, unsigned long iterations, unsigned sleep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Monitor a key change.  <a href="#ga22"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
General methods to access the Key database. 
<p>
To use them: <div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;kdb.h&gt;</span>
</pre></div><p>
This is the class that accesses the storage backend. When <a class="el" href="group__backend.html">writing a new backend </a>, these are the methods you'll have to reimplement: <a class="el" href="group__kdb.html#ga0">kdbOpen()</a>, <a class="el" href="group__kdb.html#ga3">kdbClose()</a>, <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>, <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a>, <a class="el" href="group__kdb.html#ga13">kdbStatKey()</a>, <a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a>, <a class="el" href="group__kdb.html#ga19">kdbRemove()</a>, <a class="el" href="group__kdb.html#ga17">kdbRename()</a>.<p>
And methods that are suggested to reimplement (but not needed) if you want them to get the benefits of your new backend: <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a>, <a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a>, <a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a>.<p>
The other methods are higher level. They use the above methods to do their job, and generally don't have to be reimplemented for a different backend.<p>
Language binding writers should follow the same rules:<ul>
<li>You should relay completelly on the backend-dependent methods</li><li>You may use or reimplement the second set of methods</li><li>You should completelly reimplement in your language the higher lever methods </li></ul>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="ga23" doxytag="kdb.h::KDBErr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="group__kdb.html#ga23">KDBErr</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Some return codes generated by the Elektra library. 
<p>
These are Elektra specific errors only, that the library sets in <code>errno</code>. Other errors can be generated by system calls that the API uses. Then <code>errno</code> is propagated.<p>
The idea is to keep compatibility to POSIX <code>errno</code> system, so each library error code maps to some POSIX E* error. Some mappings realy makes no sense, so to detect Elektra errors use the following error names, and to detect system's, use the naming convetions documented in <code>errno</code> man page.<p>
A very robust program should check <code>errno</code> after each API call. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga11">kdbGetChildKeys()</a> for an example on how to handle errors </dd></dl>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gga23a45" doxytag="KDB_RET_OK"></a>KDB_RET_OK</em>&nbsp;</td><td>
No error </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a46" doxytag="KDB_RET_NULLKEY"></a>KDB_RET_NULLKEY</em>&nbsp;</td><td>
Invalid Key object </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a47" doxytag="KDB_RET_UNINITIALIZED"></a>KDB_RET_UNINITIALIZED</em>&nbsp;</td><td>
Object not initilized </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a48" doxytag="KDB_RET_NOTFOUND"></a>KDB_RET_NOTFOUND</em>&nbsp;</td><td>
Key was not found </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a49" doxytag="KDB_RET_INVALIDKEY"></a>KDB_RET_INVALIDKEY</em>&nbsp;</td><td>
Key name is not <code>'system/something'</code> or <code>'user/something</code>...' </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a50" doxytag="KDB_RET_NOKEY"></a>KDB_RET_NOKEY</em>&nbsp;</td><td>
Key has no name </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a51" doxytag="KDB_RET_NODATA"></a>KDB_RET_NODATA</em>&nbsp;</td><td>
Key has no data </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a52" doxytag="KDB_RET_NODESC"></a>KDB_RET_NODESC</em>&nbsp;</td><td>
Key has no comment/description </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a53" doxytag="KDB_RET_NODOMAIN"></a>KDB_RET_NODOMAIN</em>&nbsp;</td><td>
Key has no user domain set </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a54" doxytag="KDB_RET_NOGROUP"></a>KDB_RET_NOGROUP</em>&nbsp;</td><td>
Key has no group </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a55" doxytag="KDB_RET_NOTIME"></a>KDB_RET_NOTIME</em>&nbsp;</td><td>
Key has no access time set </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a56" doxytag="KDB_RET_NOCRED"></a>KDB_RET_NOCRED</em>&nbsp;</td><td>
No credentials to access resource </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a57" doxytag="KDB_RET_TRUNC"></a>KDB_RET_TRUNC</em>&nbsp;</td><td>
Buffer was too small </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a58" doxytag="KDB_RET_NOMEM"></a>KDB_RET_NOMEM</em>&nbsp;</td><td>
Out of memory </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a59" doxytag="KDB_RET_TYPEMISMATCH"></a>KDB_RET_TYPEMISMATCH</em>&nbsp;</td><td>
Failed to convert key data due to data type </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a60" doxytag="KDB_RET_NOSYS"></a>KDB_RET_NOSYS</em>&nbsp;</td><td>
Backend method not implemented </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga23a61" doxytag="KDB_RET_EBACKEND"></a>KDB_RET_EBACKEND</em>&nbsp;</td><td>
Error opening backend </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kdb_8h-source.html#l00201">201</a> of file <a class="el" href="kdb_8h-source.html">kdb.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga24" doxytag="kdb.h::KDBOptions"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="group__kdb.html#ga24">KDBOptions</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Options to change the default behavior of some methods. 
<p>
These options should be ORed. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga11">kdbGetChildKeys()</a> <p>
<a class="el" href="group__keyset.html#ga19">ksToStream()</a> <p>
<a class="el" href="group__keymisc.html#ga1">keyToStream()</a> </dd></dl>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gga24a62" doxytag="KDB_O_RECURSIVE"></a>KDB_O_RECURSIVE</em>&nbsp;</td><td>
Act recursively. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a63" doxytag="KDB_O_DIR"></a>KDB_O_DIR</em>&nbsp;</td><td>
Include dir keys in result. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a64" doxytag="KDB_O_DIRONLY"></a>KDB_O_DIRONLY</em>&nbsp;</td><td>
Retrieve only directory keys. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a66" doxytag="KDB_O_STATONLY"></a>KDB_O_STATONLY</em>&nbsp;</td><td>
Only stat key, instead of getting entirelly. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a67" doxytag="KDB_O_INACTIVE"></a>KDB_O_INACTIVE</em>&nbsp;</td><td>
Do not ignore inactive keys (that name begins with .). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a68" doxytag="KDB_O_SORT"></a>KDB_O_SORT</em>&nbsp;</td><td>
Sort keys. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a69" doxytag="KDB_O_NFOLLOWLINK"></a>KDB_O_NFOLLOWLINK</em>&nbsp;</td><td>
Do not follow symlinks. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a70" doxytag="KDB_O_CONDENSED"></a>KDB_O_CONDENSED</em>&nbsp;</td><td>
Compressed XML, not usefull for human eyes. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a71" doxytag="KDB_O_NUMBERS"></a>KDB_O_NUMBERS</em>&nbsp;</td><td>
Use numbers intead of user and group names. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a72" doxytag="KDB_O_XMLHEADERS"></a>KDB_O_XMLHEADERS</em>&nbsp;</td><td>
Show also the XML header of the document. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a73" doxytag="KDB_O_FULLNAME"></a>KDB_O_FULLNAME</em>&nbsp;</td><td>
Export <code>user</code> keys using full name (e.g. user:username/some/key). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a74" doxytag="KDB_O_FULLUGID"></a>KDB_O_FULLUGID</em>&nbsp;</td><td>
Don't supress obvious key UID, GID, and user domain. Affects only <code>user</code> keys. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a75" doxytag="KDB_O_NOCASE"></a>KDB_O_NOCASE</em>&nbsp;</td><td>
Ignore case in ksLookup*() methods </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gga24a76" doxytag="KDB_O_NOSPANPARENT"></a>KDB_O_NOSPANPARENT</em>&nbsp;</td><td>
Don't continue search if end of current folder reached, in <a class="el" href="group__keyset.html#ga9">ksLookupRE()</a> </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kdb_8h-source.html#l00245">245</a> of file <a class="el" href="kdb_8h-source.html">kdb.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="libkdb.c::kdbOpen"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbOpen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens the session with the Key database, using a backend defined by environment var <em>$KDB_BACKEND</em>. 
<p>
If the environment is not set the <em>default</em> backend will be opened.<p>
You should allways call this method before retrieving or commiting any keys to the database. Otherwise, consequences are unpredictable. And after using the key database, you should not forget to <a class="el" href="group__kdb.html#ga3">kdbClose()</a>.<p>
This is the best way to have affairs with the key database, unless the program is concerned about security and authentication (e.g. su, login, telnetd, etc), in which <a class="el" href="group__kdb.html#ga1">kdbOpenDefault()</a> should be used. <a class="el" href="group__kdb.html#ga0">kdbOpen()</a> is used by the kdb command.<p>
Currently you can have only one backend (and key database session) initialized at a certain time.<p>
To simply manipulate Key or KeySet objects without having to retrieve them from the storage, you don't need to open the key database before with any of the kdbOpen*() methods.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga1">kdbOpenDefault()</a>, <a class="el" href="group__kdb.html#ga2">kdbOpenBackend()</a>, <a class="el" href="group__kdb.html#ga3">kdbClose()</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or whatever is returned by <a class="el" href="group__kdb.html#ga2">kdbOpenBackend()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00146">146</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00223">kdbOpenBackend()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l01117">commandExport()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="libkdb.c::kdbOpenDefault"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbOpenDefault           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens the session with the Key database. 
<p>
Different from <a class="el" href="group__kdb.html#ga0">kdbOpen()</a>, <a class="el" href="group__kdb.html#ga1">kdbOpenDefault()</a> will completely ignore the <em>$KDB_BACKEND</em> environment and open the <em>default</em> backend. So <a class="el" href="group__kdb.html#ga1">kdbOpenDefault()</a> must be used by programs concerned about security (e.g. su, login, sshd, etc).<p>
The <em>default</em> backend use to be a symlink to the real backend, and is found in /lib/libelektra-default.so<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga0">kdbOpen()</a>, <a class="el" href="group__kdb.html#ga2">kdbOpenBackend()</a>, <a class="el" href="group__kdb.html#ga3">kdbClose()</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or whatever is returned by <a class="el" href="group__kdb.html#ga2">kdbOpenBackend()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00171">171</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00223">kdbOpenBackend()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="libkdb.c::kdbOpenBackend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbOpenBackend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>backendName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens the session with the Key database, dynamically loading a specific beckend for libelektra.so. 
<p>
After dynamic loading, the backend will be initialized with its implementation of <a class="el" href="group__kdb.html#ga0">kdbOpen()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>backendName</em>&nbsp;</td><td>used to define the module filename as libelektra-<code>"backendName"</code>.so </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. On failure, <code>errno</code> is set to <a class="el" href="group__kdb.html#gga23a60">KDBErr::KDB_RET_NOSYS</a> and 1 if backend library could not be opened, 2 if backend doesn't have the essential "kdbBackendFactory" initialization symbol, 3 if backend failed to export its methods, 4 if backend does not provide a <a class="el" href="group__kdb.html#ga0">kdbOpen()</a> implementation, or anything else that the backend's kdbOpen implementation (see <a class="el" href="group__backend.html#ga9">kdbOpen_backend()</a>) returns. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga0">kdbOpen()</a> </dd></dl>
<dl compact><dt><b>Example of copying keys from one backend to another</b></dt><dd><div class="fragment"><pre class="fragment">KeySet *ks=<a class="code" href="group__keyset.html#ga0">ksNew</a>();

<a class="code" href="group__kdb.html#ga0">kdbOpen</a>(); <span class="comment">// open default backend</span>
<a class="code" href="group__kdb.html#ga11">kdbGetChildKeys</a>(<span class="stringliteral">"system/sw/httpd"</span>,ks, 
    KDB_O_NFOLLOWLINK |  <span class="comment">// we want real links, not their targets</span>
    KDB_O_INACTIVE |     <span class="comment">// even commented (inactive) keys</span>
    KDB_O_DIR |          <span class="comment">// even pure directory keys</span>
    KDB_O_RECURSIVE |    <span class="comment">// all of this recursivelly</span>
    KDB_O_SORT);         <span class="comment">// sort all</span>
<a class="code" href="group__kdb.html#ga3">kdbClose</a>();

<a class="code" href="group__kdb.html#ga2">kdbOpenBackend</a>(<span class="stringliteral">"apache"</span>);

<span class="comment">// The hipotethical libelektra-apache.so backend implementation for kdbSetKeys()</span>
<span class="comment">// simply interprets the passed KeySet and generates an old style</span>
<span class="comment">// equivalent /etc/httpd/httpd.conf file.</span>
<a class="code" href="group__kdb.html#ga15">kdbSetKeys</a>(ks);
<a class="code" href="group__kdb.html#ga3">kdbClose</a>();

<a class="code" href="group__keyset.html#ga1">ksDel</a>(ks);
</pre></div></dd></dl>
<dl compact><dt><b>Emulating same bahavior of previous example but now with the kdb command</b></dt><dd><div class="fragment"><pre class="fragment">bash# kdb export system/sw/httpd &gt; apacheconf.xml
bash# KDB_BACKEND=apache kdb <span class="keyword">import</span> apacheconf.xml
</pre></div></dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00223">223</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="libkdb_8c-source.html#l00146">kdbOpen()</a>, and <a class="el" href="libkdb_8c-source.html#l00171">kdbOpenDefault()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="libkdb.c::kdbClose"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbClose           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes the session with the Key database. 
<p>
You should call this method when you finished your affairs with the key database. You can manipulate Key and KeySet objects after <a class="el" href="group__kdb.html#ga3">kdbClose()</a>.<p>
This is the counterpart of <a class="el" href="group__kdb.html#ga0">kdbOpen()</a>. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga0">kdbOpen()</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, anything else on failure, and <code>errno</code> is set. If the backend implementation of kdbOpen can't be found, <code>errno</code> is set to <a class="el" href="group__kdb.html#gga23a60">KDBErr::KDB_RET_NOSYS</a>. </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00285">285</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l01117">commandExport()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="libkdb.c::kdbGetValue"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbGetValue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keyname</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>maxSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A high-level method to get a key value, by key name. 
<p>
This method is valid only for string keys. You should use other methods to get non-string keys.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>keyname</em>&nbsp;</td><td>the name of the key to receive the value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returned</em>&nbsp;</td><td>a buffer to put the key value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxSize</em>&nbsp;</td><td>the size of the buffer </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or other value in case of error, and <code>errno</code> is set </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga5">kdbSetValue()</a>, <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>, <a class="el" href="group__kdb.html#ga6">kdbGetValueByParent()</a>, <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00494">494</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00825">kdbGetKey()</a>, <a class="el" href="group__key.html#gga7a29">KEY_SWITCH_END</a>, <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, <a class="el" href="key_8c-source.html#l01446">keyGetString()</a>, and <a class="el" href="key_8c-source.html#l00321">keyNew()</a>.
<p>
Referenced by <a class="el" href="libkdb_8c-source.html#l00563">kdbGetValueByParent()</a>, and <a class="el" href="kdbtools_8c-source.html#l00355">ksFromXMLfile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="libkdb.c::kdbSetValue"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbSetValue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keyname</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A high-level method to set a value to a key, by key name. 
<p>
It will obviously check if key exists first, and keep its metadata. So you'll not loose the precious key comment.<p>
This will set a text key. So if the key was previously a binary, etc key, it will be retyped as text.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>keyname</em>&nbsp;</td><td>the name of the key to receive the value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>the value to be set </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, other value otherwise, and <code>errno</code> is set </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga4">kdbGetValue()</a>, <a class="el" href="group__keyvalue.html#ga2">keySetString()</a>, <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00522">522</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00825">kdbGetKey()</a>, <a class="el" href="libkdb_8c-source.html#l00910">kdbSetKey()</a>, <a class="el" href="group__key.html#gga7a29">KEY_SWITCH_END</a>, <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, <a class="el" href="key_8c-source.html#l00321">keyNew()</a>, and <a class="el" href="key_8c-source.html#l01409">keySetString()</a>.
<p>
Referenced by <a class="el" href="libkdb_8c-source.html#l00582">kdbSetValueByParent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="libkdb.c::kdbGetValueByParent"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbGetValueByParent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>parentName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>baseName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>maxSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fills the <code>returned</code> buffer with the value of a key, which name is the concatenation of <code>parentName</code> and <code>baseName</code>. 
<p>
<dl compact><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="keywordtype">char</span> *parent=<span class="stringliteral">"user/sw/MyApp"</span>;
<span class="keywordtype">char</span> *keys[]={<span class="stringliteral">"key1"</span>,<span class="stringliteral">"key2"</span>,<span class="stringliteral">"key3"</span>};
<span class="keywordtype">char</span> buffer[150];   <span class="comment">// a big buffer</span>
<span class="keywordtype">int</span> c;

<span class="keywordflow">for</span> (c=0; c&lt;3; c++) {
    <a class="code" href="group__kdb.html#ga6">kdbGetValueByParent</a>(parent,keys[c],buffer,<span class="keyword">sizeof</span>(buffer));
    <span class="comment">// Do something with buffer....</span>
}
</pre></div></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parentName</em>&nbsp;</td><td>the name of the parent key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baseName</em>&nbsp;</td><td>the name of the child key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returned</em>&nbsp;</td><td>pre-allocated buffer to be filled with key value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxSize</em>&nbsp;</td><td>size of the <code>returned</code> buffer </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>whathever is returned by <a class="el" href="group__kdb.html#ga4">kdbGetValue()</a> </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga8">kdbGetKeyByParent()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00563">563</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00494">kdbGetValue()</a>, and <a class="el" href="key_8c-source.html#l00049">strblen()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="libkdb.c::kdbSetValueByParent"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbSetValueByParent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>parentName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>baseName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the provided <code>value</code> to the key whose name is the concatenation of <code>parentName</code> and <code>baseName</code>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parentName</em>&nbsp;</td><td>the name of the parent key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baseName</em>&nbsp;</td><td>the name of the child key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>the value to set  whatever is returned by <a class="el" href="group__kdb.html#ga5">kdbSetValue()</a> </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00582">582</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00522">kdbSetValue()</a>, and <a class="el" href="key_8c-source.html#l00049">strblen()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="libkdb.c::kdbGetKeyByParent"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbGetKeyByParent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>parentName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>baseName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Given a parent key name plus a basename, returns the key. 
<p>
So here you'll provide something like<ul>
<li><code>system/sw/myApp</code> plus <code>key1</code> to get <code>system/sw/myApp/key1</code> </li><li><code>user/sw/MyApp</code> plus <code>dir1/key2</code> to get <code>user/sw/MyApp/dir1/key2</code> </li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parentName</em>&nbsp;</td><td>parent key name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baseName</em>&nbsp;</td><td>leaf or child name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returned</em>&nbsp;</td><td>a pointer to an initialized key to be filled </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or what <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> returns, and <code>errno</code> is set </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>, <a class="el" href="group__kdb.html#ga6">kdbGetValueByParent()</a>, <a class="el" href="group__kdb.html#ga9">kdbGetKeyByParentKey()</a> </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00605">605</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00825">kdbGetKey()</a>, <a class="el" href="key_8c-source.html#l00486">keySetName()</a>, and <a class="el" href="key_8c-source.html#l00049">strblen()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="libkdb.c::kdbGetKeyByParentKey"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbGetKeyByParentKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>basename</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Similar to previous, provided for convenience. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>pointer to the parent key </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>, <a class="el" href="group__kdb.html#ga8">kdbGetKeyByParent()</a>, <a class="el" href="group__kdb.html#ga6">kdbGetValueByParent()</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or what <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a> returns, and <code>errno</code> is set </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00622">622</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00825">kdbGetKey()</a>, <a class="el" href="key_8c-source.html#l00828">keyGetFullName()</a>, <a class="el" href="key_8c-source.html#l00798">keyGetFullNameSize()</a>, <a class="el" href="key_8c-source.html#l00486">keySetName()</a>, and <a class="el" href="key_8c-source.html#l00049">strblen()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="libkdb.c::kdbGetKeyChildKeys"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t kdbGetKeyChildKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>parentKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>options</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve a number of inter-related keys in one shot. 
<p>
This is one of the most practicall methods of the library. Returns a KeySet with all retrieved keys. So if your application keys live bellow <code>system/sw/myApp</code>, you'll use this method to get them all.<p>
Option can be any of the following, ORed:<ul>
<li><code><a class="el" href="group__kdb.html#gga24a62">KDBOptions::KDB_O_RECURSIVE</a></code> <br>
 Retrieve also the keys under the child keys, recursively. The kdb(1) ls command, with switch -R uses this option.</li><li><code><a class="el" href="group__kdb.html#gga24a63">KDBOptions::KDB_O_DIR</a></code> <br>
 By default, folder keys will not be returned because they don't have values and exist only to define hierarchy. Use this option if you need them to be included in the returned KeySet.</li><li><code><a class="el" href="group__kdb.html#gga24a64">KDBOptions::KDB_O_DIRONLY</a></code> <br>
 Include in <code>returned</code> only the directory keys. The resulting KeySet will be only the skeleton of the tree.</li><li><code><a class="el" href="group__kdb.html#gga24a66">KDBOptions::KDB_O_STATONLY</a></code> <br>
 Only stat(2) the keys; do not retrieve the value, comment and key data type. The resulting keys will be empty and usefull only for informational purposes. The kdb(1) ls command, without the -v switch uses this option.</li><li><code><a class="el" href="group__kdb.html#gga24a67">KDBOptions::KDB_O_INACTIVE</a></code> <br>
 Will make it not ignore inactive keys. So <code>returned</code> will be filled also with inactive keys. See elektra(7) to understand how inactive keys work.</li><li><code><a class="el" href="group__kdb.html#gga24a68">KDBOptions::KDB_O_SORT</a></code> <br>
 Will sort keys alphabetically by their names.</li></ul>
<p>
<dl compact><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="keywordtype">char</span> errormsg[300];
KeySet *myConfig;
Key *key;

key=<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"system/sw/MyApp"</span>,KEY_SWITCH_END);
myConfig=<a class="code" href="group__keyset.html#ga0">ksNew</a>();

<a class="code" href="group__kdb.html#ga0">kdbOpen</a>();
rc=<a class="code" href="group__kdb.html#ga10">kdbGetKeyChildKeys</a>(key, myConfig, KDB_O_RECURSIVE);
<a class="code" href="group__key.html#ga1">keyDel</a>(key); <span class="comment">// free this resource.... we'll use it later</span>
<a class="code" href="group__kdb.html#ga3">kdbClose</a>();

<span class="comment">// Check and handle propagated error</span>
<span class="keywordflow">if</span> (rc) <span class="keywordflow">switch</span> (errno) {
    <span class="keywordflow">case</span> <a class="code" href="group__kdb.html#gga23a49">KDB_RET_INVALIDKEY</a>:
        sprintf(errormsg,<span class="stringliteral">"Something invalid"</span>);
        perror(errormsg); <span class="comment">// use system error messages</span>
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="group__kdb.html#gga23a48">KDB_RET_NOTFOUND</a>:
        fprintf(stderr,<span class="stringliteral">"Key not found"</span>); <span class="comment">// custom error message</span>
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        sprintf(errormsg,<span class="stringliteral">"My application"</span>);
        perror(errormsg); <span class="comment">// use system error messages</span>
        <span class="keywordflow">break</span>;
}

<a class="code" href="group__keyset.html#ga3">ksRewind</a>(myConfig); <span class="comment">// go to begining of KeySet</span>
key=<a class="code" href="group__keyset.html#ga4">ksNext</a>(myConfig);
<span class="keywordflow">while</span> (key) {
    <span class="comment">// do something with each key . . .</span>

    key=<a class="code" href="group__keyset.html#ga4">ksNext</a>(myConfig); <span class="comment">// next key</span>
}
</pre></div></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parentKey</em>&nbsp;</td><td>parent key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returned</em>&nbsp;</td><td>the (pre-initialized) KeySet returned with all keys found </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>ORed options to control approaches </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga24">KDBOptions</a> <p>
<a class="el" href="group__kdb.html#ga11">kdbGetChildKeys()</a> for a convenience method <p>
<a class="el" href="group__keyset.html#ga8">ksLookupByName()</a>, <a class="el" href="group__keyset.html#ga9">ksLookupRE()</a>, <a class="el" href="group__keyset.html#ga10">ksLookupByValue()</a> for powerfull lookups after the KeySet was retrieved <p>
<a class="el" href="group__keyset.html#ga21">ksSort()</a> for what is done when you ask for <a class="el" href="group__kdb.html#gga24a68">KDBOptions::KDB_O_SORT</a> <p>
<a class="el" href="group__libexample.html#ga28">commandList()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example <p>
<a class="el" href="group__libexample.html#ga30">commandEdit()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example <p>
<a class="el" href="group__libexample.html#ga32">commandExport()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>number of keys contained by <code>returned</code>, or a negative value on error and <code>errno</code> is set </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00721">721</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00679">commandList()</a>, and <a class="el" href="libkdb_8c-source.html#l00738">kdbGetChildKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga11" doxytag="libkdb.c::kdbGetChildKeys"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t kdbGetChildKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>parentName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>returned</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>options</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This method is similar and calls <a class="el" href="group__kdb.html#ga10">kdbGetKeyChildKeys()</a>. 
<p>
It is provided for convenience. 
<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00738">738</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00721">kdbGetKeyChildKeys()</a>, <a class="el" href="group__key.html#gga7a29">KEY_SWITCH_END</a>, <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, and <a class="el" href="key_8c-source.html#l00321">keyNew()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00923">commandEdit()</a>, and <a class="el" href="kdb_8c-source.html#l00679">commandList()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga12" doxytag="libkdb.c::kdbGetRootKeys"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t kdbGetRootKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>returned</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a KeySet with all root keys currently recognized and present on the system. 
<p>
Currently, the <code>system</code> and current user's <code>user</code> keys are returned. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>returned</em>&nbsp;</td><td>the initialized KeySet to be filled </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of root keys found </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga6">KeyNamespace</a> <p>
<a class="el" href="group__libexample.html#ga28">commandList()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00763">763</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00127">_Key::flags</a>, <a class="el" href="group__key.html#gga7a29">KEY_SWITCH_END</a>, <a class="el" href="group__key.html#gga7a24">KEY_SWITCH_NEEDSYNC</a>, <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, <a class="el" href="key_8c-source.html#l00321">keyNew()</a>, <a class="el" href="key_8c-source.html#l03380">ksInsert()</a>, and <a class="el" href="kdbprivate_8h-source.html#l00178">_KeySet::size</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00679">commandList()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga13" doxytag="libkdb.c::kdbStatKey"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbStatKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Taps the key only for its meta-info from the backend storage. 
<p>
The bahavior may change from backend to backend. In the filesystem backend, it will make only a stat(2) on the key.<p>
A key of type KEY_TYPE_LINK will have its target address loaded in the <code>key</code> structure, which can be accessed later using <a class="el" href="group__keyvalue.html#ga4">keyStealValue()</a> or <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>. This is the only way to know the target of a link key without dereferencing it (in contrast to <a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>, where the link is dereferenced).<p>
Info like comments and key data type are not retrieved.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>an initialized Key pointer to be filled. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00801">801</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00679">commandList()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga14" doxytag="libkdb.c::kdbGetKey"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbGetKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fully retrieves the passed <code>key</code> from the backend storage. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>a pointer to a Key that has a name set </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or other value and <code>errno</code> is set </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> <p>
<a class="el" href="group__libexample.html#ga29">commandGet()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00825">825</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00923">commandEdit()</a>, <a class="el" href="kdb_8c-source.html#l00809">commandGet()</a>, <a class="el" href="kdb_8c-source.html#l00679">commandList()</a>, <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="libkdb_8c-source.html#l00605">kdbGetKeyByParent()</a>, <a class="el" href="libkdb_8c-source.html#l00622">kdbGetKeyByParentKey()</a>, <a class="el" href="libkdb_8c-source.html#l00494">kdbGetValue()</a>, <a class="el" href="libkdb_8c-source.html#l01209">kdbMonitorKey_default()</a>, <a class="el" href="libkdb_8c-source.html#l00522">kdbSetValue()</a>, and <a class="el" href="key_8c-source.html#l00321">keyNew()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga15" doxytag="libkdb.c::kdbSetKeys"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbSetKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ks</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Commits the <code>ks</code> KeySet to the backend storage, starting from <code>ks's</code> current position until its end. 
<p>
This is why it is suggested that you call <a class="el" href="group__keyset.html#ga3">ksRewind()</a> on <code>ks</code> beffore calling this method. Each key is checked with <a class="el" href="group__keytest.html#ga8">keyNeedsSync()</a> before being actually commited. So only changed keys are updated.<p>
If some error occurs, <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> stops and returns whatever <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> returned. The KeySet internal cursor is left on the key that generated the error (so you may check it latter with <a class="el" href="group__keyset.html#ga5">ksCurrent()</a>). The internal <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> also sets <code>errno</code> in case of error.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ks</em>&nbsp;</td><td>a KeySet full of changed keys </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or whatever <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> returns </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga16">kdbSetKey()</a>, <a class="el" href="group__keytest.html#ga8">keyNeedsSync()</a>, <a class="el" href="group__keyset.html#ga4">ksNext()</a>, <a class="el" href="group__keyset.html#ga5">ksCurrent()</a> <p>
<a class="el" href="group__libexample.html#ga30">commandEdit()</a>, <a class="el" href="group__libexample.html#ga31">commandImport()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage and error handling example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00859">859</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00923">commandEdit()</a>, and <a class="el" href="kdb_8c-source.html#l01064">commandImport()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga16" doxytag="libkdb.c::kdbSetKey"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbSetKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets <code>key</code> in the backend storage. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga14">kdbGetKey()</a>, <a class="el" href="group__kdb.html#ga15">kdbSetKeys()</a> <p>
<a class="el" href="group__libexample.html#ga26">commandSet()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or other value and <code>errno</code> is set </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00910">910</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="libkdb_8c-source.html#l01017">kdbLink()</a>, <a class="el" href="libkdb_8c-source.html#l00884">kdbSetKeys_default()</a>, and <a class="el" href="libkdb_8c-source.html#l00522">kdbSetValue()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga17" doxytag="libkdb.c::kdbRename"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbRename           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>newName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Rename a key in the backend storage. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the key to be renamed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newName</em>&nbsp;</td><td>the new key name </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or whathever is returned by the backend implementation on failure, and <code>errno</code> is propagated </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00935">935</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00461">commandMove()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga18" doxytag="libkdb.c::kdbRemoveKey"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbRemoveKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a key from the backend storage. 
<p>
This method is not recursive.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the key to be removed </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or whathever is returned by the backend implementation on failure, and <code>errno</code> is propagated </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__libexample.html#ga24">commandRemove()</a>, and <a class="el" href="group__keyset.html#ga18">ksCompare()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00960">960</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="libkdb_8c-source.html#l00985">kdbRemove()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga19" doxytag="libkdb.c::kdbRemove"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbRemove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>keyName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a key by its name from the backend storage. 
<p>
This is a convenience to <a class="el" href="group__kdb.html#ga18">kdbRemoveKey()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>keyName</em>&nbsp;</td><td>the name of the key to be removed </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, or whathever is returned by <a class="el" href="group__kdb.html#ga18">kdbRemoveKey()</a>, and <code>errno</code> is propagated </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__libexample.html#ga24">commandRemove()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l00985">985</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00960">kdbRemoveKey()</a>, <a class="el" href="group__key.html#gga7a29">KEY_SWITCH_END</a>, <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, <a class="el" href="key_8c-source.html#l00321">keyNew()</a>, and <a class="el" href="key_8c-source.html#l00486">keySetName()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00923">commandEdit()</a>, and <a class="el" href="kdb_8c-source.html#l00430">commandRemove()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga20" doxytag="libkdb.c::kdbLink"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int kdbLink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>oldPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>newKeyName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a link key on the backend storage that points to other key. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>oldPath</em>&nbsp;</td><td>destination key name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newKeyName</em>&nbsp;</td><td>name of the key that will be created and will point to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oldPath</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>whathever is returned by <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a>, and <code>errno</code> is set </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__libexample.html#ga27">commandLink()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example <p>
<a class="el" href="group__libexample.html#ga26">commandSet()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l01017">1017</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
References <a class="el" href="libkdb_8c-source.html#l00910">kdbSetKey()</a>, <a class="el" href="group__key.html#gga7a29">KEY_SWITCH_END</a>, <a class="el" href="key_8c-source.html#l00424">keyDel()</a>, <a class="el" href="key_8c-source.html#l00321">keyNew()</a>, and <a class="el" href="key_8c-source.html#l01546">keySetLink()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00625">commandLink()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga21" doxytag="libkdb.c::kdbMonitorKeys"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int32_t kdbMonitorKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>interests</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_int32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>diffMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>iterations</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>sleep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Monitor a KeySet for some key change. 
<p>
This method will scan the <code>interests</code> KeySet, starting and finishing in the KeySet's next cursor position, in a circular behavior, looking for some change defined in the <code>diffMask</code> mask. It will use <a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a> and will return at the first key change ocurrence, or when requested <code>iterations</code> finish.<p>
You may check the return code to see if some key changed, and get the updated key using <a class="el" href="group__keyset.html#ga5">ksCurrent()</a>.<p>
<dl compact><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment">KeySet *myConfigs;

myConfigs=<a class="code" href="group__keyset.html#ga0">ksNew</a>();
<a class="code" href="group__kdb.html#ga11">kdbGetChildKeys</a>(<span class="stringliteral">"system/sw/MyApp"</span>,myConfigs,KDB_O_RECURSIVE | KDB_O_SORT);

<span class="comment">// use the keys . . . .</span>

<span class="comment">// now monitor any key change</span>
<a class="code" href="group__keyset.html#ga3">ksRewind</a>(myConfigs);
<span class="keywordflow">while</span> (1) {
    Key *changed=0;
    <span class="keywordtype">char</span> keyName[300];
    <span class="keywordtype">char</span> keyData[300];
    u_int32_t diff;

    <span class="comment">// block until any change in key value or comment . . .</span>
    diff=<a class="code" href="group__kdb.html#ga21">kdbMonitorKeys</a>(myConfigs,
        KEY_SWITCH_VALUE | KEY_SWITCH_COMMENT,
        0,0); <span class="comment">// ad-infinitum</span>

    changed=<a class="code" href="group__keyset.html#ga5">ksCurrent</a>(myConfigs);
    <a class="code" href="group__keyname.html#ga4">keyGetName</a>(changed,keyName,<span class="keyword">sizeof</span>(keyName));

    <span class="keywordflow">switch</span> (diff) {
        <span class="keywordflow">case</span> <a class="code" href="group__key.html#gga7a28">KEY_SWITCH_FLAG</a>:
            printf(<span class="stringliteral">"Key %s was deleted\n"</span>,keyName);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="group__key.html#gga7a24">KEY_SWITCH_NEEDSYNC</a>:
            printf(<span class="stringliteral">"No cretentials to access Key %s\n"</span>,keyName);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
            <a class="code" href="group__keyvalue.html#ga3">keyGetString</a>(changed,keyData,<span class="keyword">sizeof</span>(keyData));
            printf(<span class="stringliteral">"Key %s has changed its value to %s\n"</span>,keyName,keyData);
    }
}

<a class="code" href="group__keyset.html#ga1">ksDel</a>(myConfigs);
</pre></div></dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__kdb.html#ga22">kdbMonitorKey()</a>, <a class="el" href="group__keyset.html#ga5">ksCurrent()</a>, <a class="el" href="group__keyset.html#ga3">ksRewind()</a>, <a class="el" href="group__keyset.html#ga4">ksNext()</a>, <a class="el" href="group__key.html#ga7">KeySwitch</a> <p>
<a class="el" href="group__libexample.html#ga33">commandMonitor()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l01091">1091</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga22" doxytag="libkdb.c::kdbMonitorKey"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int32_t kdbMonitorKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>interest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_int32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>diffMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>iterations</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned&nbsp;</td>
          <td class="mdname" nowrap> <em>sleep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Monitor a key change. 
<p>
This method will block execution until one of the folowing happens:<ul>
<li>All requested <code>iterations</code>, with requested <code>sleep</code> times, finish. If no change happens, zero is returned.</li><li>Requested key info and meta-info (defined by <code>diffMask</code>) changes when <a class="el" href="group__keytest.html#ga9">keyCompare()</a>ed with the original <code>interest</code>.</li></ul>
<p>
<code>interest</code> should be a full key with name, value, comments, permissions, etc, and all will be compared and then masked by <code>diffMask</code>.<p>
If <code>interest</code> is a folder key, use <code>KEY_SWITCH_TIME</code> in <code>diffMask</code> to detect a time change, so you'll know something happened (key modification, creation, deletion) inside the folder.<p>
If <code>interest</code> was not found, or deleted, the method will return immediatly a <code>KEY_SWITCH_FLAG</code> value.<p>
If you don't have access rights to <code>interest</code>, the method will return immediatly a <code>KEY_SWITCH_NEEDSYNC</code> value.<p>
If something from <code>diffMask</code> has changed in <code>interest</code>, it will be updated, so when method returns, you'll have an updated version of the key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interest</em>&nbsp;</td><td>key that will be monitored </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>diffMask</em>&nbsp;</td><td>what particular info change we are interested </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iterations</em>&nbsp;</td><td>how many times to test. 0 means infinitum or until some change happens </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sleep</em>&nbsp;</td><td>time to sleep, in microseconds, between iterations. 0 defaults to 1 second. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the ORed <code>KEY_SWITCH_*</code> flags of what changed </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__key.html#ga7">KeySwitch</a> <p>
<a class="el" href="group__keytest.html#ga9">keyCompare()</a> <p>
<a class="el" href="group__kdb.html#ga21">kdbMonitorKeys()</a> to monitor KeySets, and for a code example <p>
<a class="el" href="group__libexample.html#ga33">commandMonitor()</a> code in <a class="el" href="group__kdb.html">kdb</a> command for usage example </dd></dl>

<p>
Definition at line <a class="el" href="libkdb_8c-source.html#l01184">1184</a> of file <a class="el" href="libkdb_8c-source.html">libkdb.c</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l01154">commandMonitor()</a>, and <a class="el" href="libkdb_8c-source.html#l01114">kdbMonitorKeys_default()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat Jul 30 09:10:59 2005 for Elektra Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
