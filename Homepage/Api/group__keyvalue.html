<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Elektra Project: Key :: Value Manipulation Methods</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>Key :: Value Manipulation Methods</h1>Methods to do various operations on Key values.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga0" doxytag="keyvalue::keyGetDataSize"></a>
ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga0">keyGetDataSize</a> (const <a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An alias to <a class="el" href="group__keyvalue.html#ga1">keyGetValueSize()</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga1">keyGetValueSize</a> (const <a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of bytes needed to store the key value, including the NULL terminator.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga2">keySetString</a> (<a class="el" href="struct__Key.html">Key</a> *key, const char *newStringValue)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the value for <code>key</code> as <code>newStringValue</code>.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga3">keyGetString</a> (const <a class="el" href="struct__Key.html">Key</a> *key, char *returnedString, size_t maxSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the value of a key as a string.  <a href="#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga4">keyStealValue</a> (const <a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a pointer to the real internal <code>key</code> value.  <a href="#ga4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga5">keySetLink</a> (<a class="el" href="struct__Key.html">Key</a> *key, const char *target)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set <code>key</code> as type <a class="el" href="group__key.html#gga5a9">KeyType::KEY_TYPE_LINK</a> with target <code>target</code>.  <a href="#ga5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga6">keyGetLink</a> (const <a class="el" href="struct__Key.html">Key</a> *key, char *returnedTarget, size_t maxSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the target key pointed by <code>key</code>.  <a href="#ga6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga7">keyGetBinary</a> (const <a class="el" href="struct__Key.html">Key</a> *key, void *returnedValue, size_t maxSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the binary or string value of <code>key</code>.  <a href="#ga7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga8">keySetBinary</a> (<a class="el" href="struct__Key.html">Key</a> *key, const void *newBinary, size_t dataSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the value of a key as a binary.  <a href="#ga8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga9">keyGetType</a> (const <a class="el" href="struct__Key.html">Key</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the key data type.  <a href="#ga9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_int8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga10">keySetType</a> (<a class="el" href="struct__Key.html">Key</a> *key, u_int8_t newType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Force a key type.  <a href="#ga10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__keyvalue.html#ga11">keySetRaw</a> (<a class="el" href="struct__Key.html">Key</a> *key, const void *newBinary, size_t dataSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set raw data as the value of a key.  <a href="#ga11"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Methods to do various operations on Key values. 
<p>
A key can contain a value in different format. The most likely situation is, that the value is interpreted as text. Use <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a> for that. You can save any Unicode Symbols and Elektra will take care that you get the same back, independent of your current Environment.<p>
In some situations this idea fails. When you need exactly the same value back without any interpretation of the characters, there is <a class="el" href="group__keyvalue.html#ga8">keySetBinary()</a>. If you use that, its very likely that your Configuration is not according to the standard. Also for Numbers, Booleans and Date you should use <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>. To do so, you might use strtod() strtol() and then atol() or atof() to convert back.<p>
A key may also be just a Link. Here you will also find the manipulation methods for <a class="el" href="group__keyvalue.html#ga6">keyGetLink()</a>.<p>
To use them: <div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;kdb.h&gt;</span>
</pre></div><hr><h2>Function Documentation</h2>
<a class="anchor" name="ga1" doxytag="key.c::keyGetValueSize"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keyGetValueSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the number of bytes needed to store the key value, including the NULL terminator. 
<p>
This method is used with malloc() before a <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a> or <a class="el" href="group__keyvalue.html#ga7">keyGetBinary()</a>.<p>
<dl compact><dt><b>Returns:</b></dt><dd>the number of bytes needed to store the key value </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>, <a class="el" href="group__keyvalue.html#ga7">keyGetBinary()</a>, <a class="el" href="group__keyvalue.html#ga4">keyStealValue()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01381">1381</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00120">_Key::dataSize</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00809">commandGet()</a>, and <a class="el" href="key_8c-source.html#l01365">keyGetDataSize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="key.c::keySetString"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keySetString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>newStringValue</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the value for <code>key</code> as <code>newStringValue</code>. 
<p>
The function will allocate and save a private copy of <code>newStringValue</code>, so the parameter can be freed after the call.<p>
String values will be saved in backend storage, when <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a> will be called, in UTF-8 universal encoding,regardeless of the program's current encoding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the key to set the string value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newStringValue</em>&nbsp;</td><td>NULL-terminated text string to be set as <code>key's</code> value </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of bytes actually saved in private struct including final NULL </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>, <a class="el" href="group__keyvalue.html#ga4">keyStealValue()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01409">1409</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="group__key.html#gga5a11">KEY_TYPE_STRING</a>, <a class="el" href="key_8c-source.html#l01853">keySetRaw()</a>, <a class="el" href="key_8c-source.html#l01814">keySetType()</a>, and <a class="el" href="key_8c-source.html#l00049">strblen()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="libkdb_8c-source.html#l00522">kdbSetValue()</a>, and <a class="el" href="key_8c-source.html#l00321">keyNew()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="key.c::keyGetString"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keyGetString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>returnedString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>maxSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the value of a key as a string. 
<p>
If the value can't be represented as a text string (binary value, see <a class="el" href="group__keytest.html#ga7">keyIsBin()</a>), <code>errno</code> is set to <a class="el" href="group__kdb.html#gga23a59">KDBErr::KDB_RET_TYPEMISMATCH</a>.<p>
<dl compact><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment">Key *key;
<span class="keywordtype">char</span> buffer[300];

<span class="comment">// populate key somehow...</span>

<span class="keywordflow">if</span> (<a class="code" href="group__keytest.html#ga7">keyIsBin</a>(key)) <a class="code" href="group__keyvalue.html#ga7">keyGetBinary</a>(key,buffer,<span class="keyword">sizeof</span>(buffer));
<span class="keywordflow">else</span> <a class="code" href="group__keyvalue.html#ga3">keyGetString</a>(key,buffer,<span class="keyword">sizeof</span>(buffer));
</pre></div></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the object to gather the value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returnedString</em>&nbsp;</td><td>pre-allocated memory to store a copy of the key value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxSize</em>&nbsp;</td><td>number of bytes of pre-allocated memory in <code>returnedString</code> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of bytes actually copied to <code>returnedString</code>, including final NULL </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga4">keyStealValue()</a>, <a class="el" href="group__keyvalue.html#ga2">keySetString()</a>, <a class="el" href="group__keyvalue.html#ga7">keyGetBinary()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01446">1446</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00151">_Key::data</a>, <a class="el" href="kdbprivate_8h-source.html#l00120">_Key::dataSize</a>, and <a class="el" href="kdbprivate_8h-source.html#l00072">_Key::type</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00809">commandGet()</a>, and <a class="el" href="libkdb_8c-source.html#l00494">kdbGetValue()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="key.c::keyStealValue"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void* keyStealValue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return a pointer to the real internal <code>key</code> value. 
<p>
This is a much more efficient version of <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>, <a class="el" href="group__keyvalue.html#ga6">keyGetLink()</a>, <a class="el" href="group__keyvalue.html#ga7">keyGetBinary()</a>, and you should use it if you are responsible enough to not mess up things.<p>
If <code>key</code> is not binary (<a class="el" href="group__keytest.html#ga7">keyIsBin()</a>), you may cast the returned as a <code>"char *"</code> because you'll get a NULL terminated regular string. If it is binary, the size of the value can be determined by <a class="el" href="group__keyvalue.html#ga1">keyGetValueSize()</a>.<p>
Note that the Key structure also has as data size field that is calculated by library internal calls to <a class="el" href="group__keyvalue.html#ga11">keySetRaw()</a>, so to avoid inconsistencies, you must never used the pointer returned by <a class="el" href="group__keyvalue.html#ga4">keyStealValue()</a> method to set a new value. Use <a class="el" href="group__keyvalue.html#ga2">keySetString()</a>, <a class="el" href="group__keyvalue.html#ga8">keySetBinary()</a>, <a class="el" href="group__keyvalue.html#ga5">keySetLink()</a>, <a class="el" href="group__keyvalue.html#ga11">keySetRaw()</a> instead.<p>
<dl compact><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment">KeySet *ks=<a class="code" href="group__keyset.html#ga0">ksNew</a>();
Key *current=0;

<a class="code" href="group__kdb.html#ga11">kdbGetChildKeys</a>(<span class="stringliteral">"system/sw/my"</span>,ks,KDB_O_SORT|KDB_O_RECURSIVE);

<a class="code" href="group__keyset.html#ga3">ksRewind</a>(ks);
<span class="keywordflow">while</span>(current=<a class="code" href="group__keyset.html#ga4">ksNext</a>(ks)) {
    size_t size=0;
    
    <span class="keywordflow">if</span> (<a class="code" href="group__keytest.html#ga7">keyIsBin</a>(current)) {
        size=<a class="code" href="group__keyvalue.html#ga1">keyGetValueSize</a>(current);
        printf(<span class="stringliteral">"Key %s has a value of size %d bytes. Value: &lt;BINARY&gt;\nComment: %s"</span>,
            <a class="code" href="group__keyname.html#ga5">keyStealName</a>(current),
            size,
            <a class="code" href="group__keymeta.html#ga7">keyStealComment</a>(current));
    } <span class="keywordflow">else</span> {
        size=<a class="code" href="group__backend.html#ga8">strblen</a>((<span class="keywordtype">char</span> *)<a class="code" href="group__keyvalue.html#ga4">keyStealValue</a>(current));
        printf(<span class="stringliteral">"Key %s has a value of size %d bytes. Value: %s\nComment: %s"</span>,
            <a class="code" href="group__keyname.html#ga5">keyStealName</a>(current),
            size,
            (<span class="keywordtype">char</span> *)<a class="code" href="group__keyvalue.html#ga4">keyStealValue</a>(current),
            <a class="code" href="group__keymeta.html#ga7">keyStealComment</a>(current));
    }
}
</pre></div></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the key object to work with </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga1">keyGetValueSize()</a>, <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>, <a class="el" href="group__keyvalue.html#ga7">keyGetBinary()</a>, <a class="el" href="group__keyvalue.html#ga6">keyGetLink()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01526">1526</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00151">_Key::data</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l01154">commandMonitor()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="key.c::keySetLink"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keySetLink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>target</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set <code>key</code> as type <a class="el" href="group__key.html#gga5a9">KeyType::KEY_TYPE_LINK</a> with target <code>target</code>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the object to work with </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>target</em>&nbsp;</td><td>the value to set to <code>key</code> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>whatever returned by <a class="el" href="group__keyvalue.html#ga11">keySetRaw()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01546">1546</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="group__key.html#gga5a9">KEY_TYPE_LINK</a>, <a class="el" href="key_8c-source.html#l01853">keySetRaw()</a>, <a class="el" href="key_8c-source.html#l01814">keySetType()</a>, and <a class="el" href="key_8c-source.html#l00049">strblen()</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, and <a class="el" href="libkdb_8c-source.html#l01017">kdbLink()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="key.c::keyGetLink"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keyGetLink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>returnedTarget</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>maxSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the target key pointed by <code>key</code>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>returnedTarget</em>&nbsp;</td><td>a pre-allocated buffer to store the target </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxSize</em>&nbsp;</td><td>the size in bytes of the <code>returnedTarget</code> buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the link key </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the size in bytes of the copied target string</dd></dl>
<p>
TODO: Remove or:<ul>
<li>update Doc</li><li>add keyGetLinkSize() </li></ul>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01569">1569</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00151">_Key::data</a>, <a class="el" href="kdbprivate_8h-source.html#l00120">_Key::dataSize</a>, and <a class="el" href="kdbprivate_8h-source.html#l00072">_Key::type</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="key.c::keyGetBinary"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keyGetBinary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>returnedValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>maxSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the binary or string value of <code>key</code>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>returnedValue</em>&nbsp;</td><td>pre-allocated memory to store a copy of <code>key's</code> value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxSize</em>&nbsp;</td><td>number of bytes of pre-allocated memory </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of bytes actually copied to <code>returnedValue</code> </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga8">keySetBinary()</a>, <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>, <a class="el" href="group__keyvalue.html#ga4">keyStealValue()</a>, <a class="el" href="group__keytest.html#ga7">keyIsBin()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01660">1660</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00151">_Key::data</a>, and <a class="el" href="kdbprivate_8h-source.html#l00120">_Key::dataSize</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00809">commandGet()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="key.c::keySetBinary"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keySetBinary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>newBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>dataSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the value of a key as a binary. 
<p>
A private copy of <code>newBinary</code> will allocated and saved inside <code>key</code>, so the parameter can be deallocated after the call.<p>
The <code>filesys</code> backend, when used through a <a class="el" href="group__kdb.html#ga16">kdbSetKey()</a>, will make the value be encoded into a human readable hex-digit text format.<p>
UNIX sysadmins don't like to deal with binary sand box data. Consider using a string key instead.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the object on which to set the value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newBinary</em>&nbsp;</td><td>value octet stream </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataSize</em>&nbsp;</td><td>number of bytes to copy from <code>newBinary</code> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of bytes actually copied to internal struct storage </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga7">keyGetBinary()</a>, <a class="el" href="group__keytest.html#ga7">keyIsBin()</a>, <a class="el" href="group__keyvalue.html#ga3">keyGetString()</a>, <a class="el" href="group__keyvalue.html#ga4">keyStealValue()</a>, <a class="el" href="group__keyvalue.html#ga2">keySetString()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01701">1701</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="group__key.html#gga5a10">KEY_TYPE_BINARY</a>, <a class="el" href="key_8c-source.html#l01853">keySetRaw()</a>, and <a class="el" href="key_8c-source.html#l01814">keySetType()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="key.c::keyGetType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int8_t keyGetType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the key data type. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga10">keySetType()</a>, <a class="el" href="group__keytest.html#ga7">keyIsBin()</a>, <a class="el" href="group__keytest.html#ga6">keyIsDir()</a>, <a class="el" href="group__keytest.html#ga5">keyIsLink()</a> <p>
<a class="el" href="group__key.html#ga5">KeyType</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the key type </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01735">1735</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00072">_Key::type</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00809">commandGet()</a>, and <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="key.c::keySetType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_int8_t keySetType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_int8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>newType</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Force a key type. 
<p>
See the <a class="el" href="group__key.html#ga5">KeyType</a> documentation to understand the concepts behind Elektra key's value types.<p>
This method is usually not needed, unless you are working with more semantic value types, or want to force a specific value type for a key. It is not usually needed because the data type is automatically set when setting the key value.<p>
The <a class="el" href="group__key.html#gga5a8">KeyType::KEY_TYPE_DIR</a> is the only type that has no value, so when using this method to set to this type, the key value will be freed.<p>
<dl compact><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="preprocessor">#define KEY_TYPE_COLOR (KEY_TYPE_STRING+4)</span>
<span class="preprocessor"></span>
Key *color1;
Key *color2;

<span class="comment">// Set color1 key</span>
color1=<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"user/sw/MyApp/colors/someColor"</span>,
    KEY_SWITCH_TYPE,KEY_TYPE_COLOR,
    KEY_SWITCH_VALUE,<span class="stringliteral">"#4B52CA"</span>,
    KEY_SWITCH_COMMENT,<span class="stringliteral">"a custom color"</span>,
    KEY_SWITCH_END);

<span class="comment">// Set color2 key</span>
color2=<a class="code" href="group__key.html#ga0">keyNew</a>(<span class="stringliteral">"system/sw/MyApp/colors/green"</span>,
    KEY_SWITCH_TYPE,KEY_TYPE_COLOR,
    KEY_SWITCH_VALUE,<span class="stringliteral">"green"</span>,
    KEY_SWITCH_COMMENT,<span class="stringliteral">"the green color"</span>,
    KEY_SWITCH_END);

<span class="comment">// Start affairs with Key database</span>
<a class="code" href="group__kdb.html#ga0">kdbOpen</a>();

<span class="comment">// Commit the keys</span>
<a class="code" href="group__kdb.html#ga16">kdbSetKey</a>(color1);
<a class="code" href="group__kdb.html#ga16">kdbSetKey</a>(color2);

<span class="comment">// Reset memory related to our structures to reuse them later</span>
<a class="code" href="group__key.html#ga4">keyClose</a>(color1);
<a class="code" href="group__key.html#ga4">keyClose</a>(color2);

<span class="comment">// Retrieve keys from the database</span>
<a class="code" href="group__keyname.html#ga0">keySetName</a>(color1,<span class="stringliteral">"user/sw/MyApp/colors/someColor"</span>);
<a class="code" href="group__kdb.html#ga14">kdbGetKey</a>(color1);

<a class="code" href="group__keyname.html#ga0">keySetName</a>(color2,<span class="stringliteral">"system/sw/MyApp/colors/green"</span>);
<a class="code" href="group__kdb.html#ga14">kdbGetKey</a>(color2);

<span class="comment">// End of the affairs with Key database by now</span>
<a class="code" href="group__kdb.html#ga3">kdbClose</a>();

<span class="comment">// Get the key types, which should be our user-defined KEY_TYPE_COLOR</span>
u_int8_t tcolor1=<a class="code" href="group__keyvalue.html#ga9">keyGetType</a>(color1);
u_int8_t tcolor2=<a class="code" href="group__keyvalue.html#ga9">keyGetType</a>(color2);

<a class="code" href="group__key.html#ga1">keyDel</a>(color1);
<a class="code" href="group__key.html#ga1">keyDel</a>(color2);
</pre></div></dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga9">keyGetType()</a> <p>
<a class="el" href="group__key.html#ga5">KeyType</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the new type </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01814">1814</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00090">_Key::access</a>, <a class="el" href="kdbprivate_8h-source.html#l00127">_Key::flags</a>, <a class="el" href="group__key.html#gga5a8">KEY_TYPE_DIR</a>, <a class="el" href="key_8c-source.html#l01853">keySetRaw()</a>, and <a class="el" href="kdbprivate_8h-source.html#l00072">_Key::type</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="key_8c-source.html#l00321">keyNew()</a>, <a class="el" href="key_8c-source.html#l01701">keySetBinary()</a>, <a class="el" href="key_8c-source.html#l01546">keySetLink()</a>, and <a class="el" href="key_8c-source.html#l01409">keySetString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga11" doxytag="key.c::keySetRaw"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t keySetRaw           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>newBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>dataSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set raw data as the value of a key. 
<p>
If NULL pointers are passed, key value is cleaned. This method will not change or set the key type, and should not be used unless working with user-defined value types.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>newBinary</em>&nbsp;</td><td>array of bytes to set as the value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataSize</em>&nbsp;</td><td>number bytes to use from newBinary, including the final NULL </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of bytes actually set in internall buffer. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__keyvalue.html#ga10">keySetType()</a>, <a class="el" href="group__keyvalue.html#ga2">keySetString()</a>, <a class="el" href="group__keyvalue.html#ga8">keySetBinary()</a> </dd></dl>

<p>
Definition at line <a class="el" href="key_8c-source.html#l01853">1853</a> of file <a class="el" href="key_8c-source.html">key.c</a>.
<p>
References <a class="el" href="kdbprivate_8h-source.html#l00151">_Key::data</a>, <a class="el" href="kdbprivate_8h-source.html#l00120">_Key::dataSize</a>, <a class="el" href="kdbprivate_8h-source.html#l00127">_Key::flags</a>, and <a class="el" href="group__key.html#gga7a16">KEY_SWITCH_VALUE</a>.
<p>
Referenced by <a class="el" href="kdb_8c-source.html#l00513">commandSet()</a>, <a class="el" href="key_8c-source.html#l02211">keyDup()</a>, <a class="el" href="key_8c-source.html#l00321">keyNew()</a>, <a class="el" href="key_8c-source.html#l01701">keySetBinary()</a>, <a class="el" href="key_8c-source.html#l01546">keySetLink()</a>, <a class="el" href="key_8c-source.html#l01409">keySetString()</a>, and <a class="el" href="key_8c-source.html#l01814">keySetType()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat Jul 30 09:10:59 2005 for Elektra Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
