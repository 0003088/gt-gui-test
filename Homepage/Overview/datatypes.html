      <div class="section" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="datatypes"></a>5. Key Data Types</h2>
            </div>
          </div>
          <div></div>
        </div>
        <p>There are only two types of data that can be stored:</p>
        <div class="variablelist">
          <dl>
            <dt>
              <span class="term">
                <span class="type">Text</span>
              </span>
            </dt>
            <dd>
              <p>Handled as pure text. Regardeless of the charset being used, these values are always stored as UTF-8. This ensures very strong internationalization and migration capabilities, while keeping simplicity. If you don't want the Elektra framework to convert your non-ASCII text to UTF-8 (not recomended), you should use the Binary data format.</p>
            </dd>
            <dt>
              <span class="term">
                <span class="type">Binary</span>
              </span>
            </dt>
            <dd>
              <p>A stream of bytes, not necessarily text. It is recommended that you avoid using binary values because UNIX system administrators tend to consider them as unmanageable blackboxes. Anyway, the value will be encoded into pure text format based on hexadecimal digits, for openness and ease of administration. This data type should also be avoided because it is less efficient.</p>
            </dd>
          </dl>
        </div>
        <p>There are very good reasons why types like <span class="type">Integer</span>, <span class="type">Time</span>, <span class="type">Font</span>, <span class="type">List</span>, etc were not implemented: Elektra was designed to be usefull for any type of program, so having more specific data types implicates in the definition of value limits, separators in the storage format, etc, that may be good for some application and bad for other. So the semantics of the data is handled by the application. A program or framework may define its own special data handling methods using these essential basic types. See the <tt class="function">keyGetType()</tt> and <tt class="function">keySetType()</tt> methods documentation in the  <span class="citerefentry"><span class="refentrytitle">kdb</span>(3)</span> man page to understand how to set keys with your own data types.</p>
        <p>There are more two types of keys:</p>
        <div class="variablelist">
          <dl>
            <dt>
              <span class="term">
                <span class="type">Directory</span>
              </span>
            </dt>
            <dd>
              <p>It can't store a value, but, as a directory in a filesystem, it serves as a way to group correlated keys.</p>
            </dd>
            <dt>
              <span class="term">
                <span class="type">Link</span>
              </span>
            </dt>
            <dd>
              <p>It is a link to another key. They work as symbolic links in the filesystem: when trying to access them, you will actually access the key they point to. The API also provides ways to access these special keys without dereferencing them.</p>
            </dd>
          </dl>
        </div>
      </div>
      <div class="section" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="metadata"></a>6. Key Meta Data</h2>
            </div>
          </div>
          <div></div>
        </div>
        <p>Besides the key name and the value, each key has other attributes:</p>
        <div class="variablelist">
          <dl>
            <dt>
              <span class="term">
                <span class="type">Owner's User and Group</span>
              </span>
            </dt>
            <dd>
              <p>This is a system's UID and GID equal to the ones found in regular files' attributes.</p>
            </dd>
            <dt>
              <span class="term">
                <span class="type">Access Permissions</span>
              </span>
            </dt>
            <dd>
              <p>Filesystem-like access permissions for user, group and others.</p>
            </dd>
            <dt>
              <span class="term">
                <span class="type">Modification, Access and Stat Times</span>
              </span>
            </dt>
            <dd>
              <p>Last time a key was modified, readed and stated (listed), respectively.</p>
            </dd>
            <dt>
              <span class="term">
                <span class="type">Key Comment</span>
              </span>
            </dt>
            <dd>
              <p>Pretty much as a configuration file comment. Not intended to be used in GUI applications, because it isn't internationalizable.</p>
            </dd>
          </dl>
        </div>
        <div class="section" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="securityexample"></a>6.1. Fine Grained Security Example</h3>
              </div>
            </div>
            <div></div>
          </div>
          <p>To show this metadata in action, this screen shows the <span><b class="command">kdb</b></span> command listing keys and their attributes related to user <tt class="varname">nobody</tt>.</p>
          <pre class="screen"><tt class="prompt">bash$</tt> <span><b class="command">kdb ls -Rlv system/users/nobody</b></span>
-rw-r--r--   root  root    17 Mar 31 09:07 system/users/nobody/uid=99
-rw-r--r--   root  root    17 Mar 31 09:07 system/users/nobody/gid=99
-rw-r--r--   root  root    21 Mar 31 09:07 system/users/nobody/gecos=Nobody
-rw-r--r--   root  root    16 Mar 31 09:07 system/users/nobody/home=/
-rw-r--r--   root  root    28 Mar 31 09:07 system/users/nobody/shell=/sbin/nologin
-rw-------   root  root    16 Mar 31 09:07 system/users/nobody/password
-rw-------   root  root    16 Mar 31 09:07 system/users/nobody/passwdChangeBefore
-rw-------   root  root    20 Mar 31 09:07 system/users/nobody/passwdChangeAfter
-rw-------   root  root    16 Mar 31 09:07 system/users/nobody/passwdWarnBefore
-rw-------   root  root    15 Mar 31 09:07 system/users/nobody/passwdDisableAfter
-rw-------   root  root    15 Mar 31 09:07 system/users/nobody/passwdDisabledSince
-rw-------   root  root    15 Mar 31 09:07 system/users/nobody/passwdReserved
			</pre>
          <p>We ran the <span><b class="command">kdb</b></span> command without super-user credentials, asking for long (<tt class="option">-l</tt>), recursive (<tt class="option">-R</tt>) listing, and to show each key value (<tt class="option">-v</tt>). But (since we are) regular user, we don't have permission to see the values of the <tt class="filename">system/users/nobody/passwd*</tt> fields.</p>
          <p>The users database files were elektrified to key-value pairs using the <span><b class="command">users-convert</b></span> script included with the distribution.</p>
        </div>
      </div>
      <div class="section" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="bestpract"></a>7. Best Practices When Creating Keys</h2>
            </div>
          </div>
          <div></div>
        </div>
        <p>When using Elektra to store your application's configuration and state, please keep in mind the following rules:</p>
        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p>You are not allowed to create keys right under <tt class="filename">system</tt> or <tt class="filename">user</tt>.</p>
            </li>
            <li>
              <p>You are not allowed to create folder keys right under <tt class="filename">system</tt> or <tt class="filename">user</tt>. They are reserved for very essential OS subsystems.</p>
            </li>
            <li>
              <p>The keys for your application, called say <i class="replaceable"><tt>MyApp</tt></i>, should be created under <tt class="filename">system/sw/MyApp</tt> and/or <tt class="filename">user/sw/MyApp</tt>.</p>
            </li>
            <li>
              <p>It is suggested to make your application look for default keys under <tt class="filename">system/sw/MyApp/current</tt> and/or <tt class="filename">user/sw/MyApp/current</tt>. This way, from a sysadmin perspective, it will be possible to copy the <tt class="filename">system/sw/MyApp/current</tt> tree to something like <tt class="filename">system/sw/MyApp/old</tt>, and keep system clean and organized.</p>
            </li>
          </ul>
        </div>
      </div>
