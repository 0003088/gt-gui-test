Name: registry
Version: _VERSION_
Release: 1
Source:    http://registry.sf.net/%{name}-%{version}.tar.gz
Group:     System Environment/Libraries
Copyright: LGPL
Vendor: Avi Alkalay <avi@unix.sh>
Packager: Avi Alkalay <avi@unix.sh>
URL: http://registry.sf.net
BuildRoot:   %{_tmppath}/%{name}-%{version}-build
BuildRequires: /usr/bin/xsltproc
Summary: A registry to store general key-value pairs instead of text configuration files

%description
The Linux Registry is an alternative back-end for text configuration files.

Instead of each program to have its own text configuration files, the Registry tries to provide a universal, fast, consistent, robust, thread-safe and transactional infrastructure to store configuration parameters through a key-value pair mechanism.

This way any software can read/save his configuration using a consistent API. Also, applications can be aware of other applications configurations, leveraging easy application integration.


%package devel
Summary: Include files and API documentation for the Linux Registry
Group: Development/System
Requires: registry = %{version}-%{release}

%description devel
The Linux Registry is an alternative back-end for text configuration files.

Instead of each program to have its own text configuration files, the Registry tries to provide a universal, fast, consistent, robust, thread-safe and transactional infrastructure to store configuration parameters through a key-value pair mechanism.

This way any software can read/save his configuration using a consistent API. Also, applications can be aware of other applications configurations, leveraging easy application integration.

This package contains the include files and API manual pages to use the Registry API in C.

%prep
%setup -n registry
%build
# Setup for parallel builds
numprocs=`egrep -c ^cpu[0-9]+ /proc/stat || :`
if [ "$numprocs" = "0" ]; then
	numprocs=1
fi

make all

%install
#mkdir -p $RPM_BUILD_ROOT/bin
#mkdir -p $RPM_BUILD_ROOT/lib
#mkdir -p $RPM_BUILD_ROOT/usr/lib
#mkdir -p $RPM_BUILD_ROOT/usr/include
#mkdir -p $RPM_BUILD_ROOT/usr/share/doc/registry
#mkdir -p $RPM_BUILD_ROOT/usr/share/doc/registry-devel
#mkdir -p $RPM_BUILD_ROOT/usr/share/man/man1
#mkdir -p $RPM_BUILD_ROOT/usr/share/man/man3
#mkdir -p $RPM_BUILD_ROOT/usr/share/man/man5
#mkdir -p $RPM_BUILD_ROOT/usr/share/man/man7
#mkdir -p $RPM_BUILD_ROOT/etc/profile.d

make DESTDIR=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT/*
rm -rf $RPM_BUILD_DIR/registry




%post
# Create basic key structure for apps
rg set -t dir system/sw


%files
%defattr(-,root,root,0755)
/lib/*.so
/bin/*
/etc/profile.d/*
/usr/share/doc/registry
/usr/share/man/man1/*
/usr/share/man/man7/*
/usr/share/man/man5/*
/usr/share/sgml/*

%files devel
/usr/include/*
/usr/lib/*.a
/usr/share/doc/registry-devel
/usr/share/man/man3/*

%changelog


